 [toc]

## 编码

### BCD码

- 用4为二进制数(可以表示$2^4=16$种不同的值)来表示10个十进制数0~9
  - 这种编码方法使得二进制数和十进制数可以快速进行转换
  - 容易发现,BCD码中有6中冗余码不代表某个十进制数

#### 8421BCD

- 有权BCD码
  - 权值从高到低为$8,4,2,1$
  - $b_4b_3b_2b_1$代表的十进制数就是按权展开$\sum\limits_{i=1}^{4}b_i2^{i-1}$
- 具有的6个冗余码为:$1010\sim{1111}$

##### 修正

- $两个4位8421BCD码相加的结果如果不大于9即:(1001)_{8421BCD}$,则不需要修正
- 否则需要修正:
  - $例如:15=6+9=0110_2+1001_2=1111_2$
    - 而$15=\underline{0001}\overline{0101}$,即,1,5的权分别用一个8421BCD码分别表示
    - 显然1111不是正确结果
  - 修正方法简单,假设某个结果X=A+B落在冗余码区间内的$1010\sim 1111$,则对X+6,即可
    - 从16进制的角度(对应4为8421BCD码)来看容易理解
    - 超过9的部分记为T落入冗余区间(跨度为$6(=0110_2$)),为了还原T,额外+6来填补冗余区间,还原了T,得到正确结果
    - $上例1111_2+0110_2=10101_2$用8421BCD表示(高位补0)得到$00010101_{8421BCD}$

##### BCD转10进制数

- 不同于按权展开,根据8421BCD的定义,将BCD二进制串从低位向高位每四个一组,分别转换为10进制的数码(0~9)中的一个即可
  - eg.$101001_{8421BCD}=29_{10}$

## 算数逻辑单元ALU

- ALU是一种功能强的组合逻辑电路
- 能够进行多种算数运算和逻辑运算
  - 加减乘除都能够归结为加法运算,ALU的核心是**带标志的加法器**





# 定点数加减计算

- 对于定点数
  - 小数点约定在最左边就是顶点小数;
  - 约定在最右边就是定点整数
- 实际上机器内部没有小数点
  - 因此在运算过程中,可以不考虑是小数还是整数,只需要关心它们的**符号**和**数值位**

## 补码加减法运算

- 不同于原码的加减法,(原码的符号位是单独处理,而不是统一做加法)
- 补码才可以将符号位和数值位一样做加法

###  补码加法的基本公式如下:

#### 加法

- $整数  \quad[A]_{补}+[B]_{补}=[A+B]_{补}\left(\bmod 2^{n+1}\right)$
  $小数  \quad[A]_{\text {补 }}+[B]_{补}=[A+B]_{补}(\bmod 2)$
- 即补码表示的两个数在进行加法运算时,可以把符号位与数值位同等处理,
  - 只要结果不超出机器能表示的数值范围,
    - 运算后的结果按  $ 2^{n+1}$  取模  (  对于整数  )
    - 或按 2 取模  (  对于小数  ) ,
  - 就能得到本次加法的运算结果。
- 可根据补码定义,按两个操作数的四种正负组合情况加以证明。


#### 减法

- $因  A-B=A+(-B)$
- 则  $[A-B]_{补}=[A+(-B)]_{补}$
- 由补码加法基本公式可得
- 整数$\quad[A-B]_{补}=[A]_{补}+[-B]_{补}\left(\bmod 2^{n+1}\right)$
- 小数$\quad[A-B]_{\text {补 }}=[A]_{\text {补}}+[-B]_{\text {补 }}(\bmod 2)$

#### 小结

- 符号位和数值位一起参与运算,加/减结果的符号位也在运算中直接得出
- 最终的运算结果保留最低位开始的n+1位(也就是能够刚好放在寄存器中),而更高位丢弃

#### 补码之间的减法:

- 此外,还成立:

  - $C=A-B$

    - $C(C)=C(A)-C(B)$
    - $C(C)=C(A)+C(-B)$

  - $$
    [A]_{补}-[B]_{补}=[A]_{补}+(-[B]_{补})\\
    =[A]_{补}+[-B]_{补}=[A-B]_{补}
    $$

    

- 这里的A,B都是真值.


- 因此,若机器数采用补码, 当求  A-B  时, 只需先求  $[-B]_{补}$
- $由C(B)求C(-B)是容易的,利用规律:$

  - $真值x的相反数-x的补码C(-x)可通过将C(x)的每一位(包括符号位)取反再加1得到$
  - $对于给定的A-B算式,通常A,B都是正数,从而x的补码和原码相同:C(x)=T(x)$


##### 例


- ![在这里插入图片描述](https://img-blog.csdnimg.cn/20210622125456818.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3h1Y2hhb3hpbjEzNzU=,size_16,color_FFFFFF,t_70)



