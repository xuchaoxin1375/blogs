## 动态 RAM(DRAM)的刷新

- 刷新的过程实质上是先将原存信息读出,再由刷新放大器形成原信息并重新写入的再生过程

  - 刷新放大器及读放大器均起此作用)。
  - 由于存储单元被访问是随机的,有可能某些存储单元长期得不到访问,不进行存储器的读/写操作,其存储单元内的原信息将会慢慢消失。
  - 为此,必须采用定时刷新的方法,它规定在一定的时间内,对动态 RAM 的全部基本单元电路必作一次刷新,一般取 2 ms,这个时间称为刷新周期,又称 `再生周期`。
  - 刷新是 `一行行`进行的,必须在 `刷新周期内`,由专用的刷新电路来完成 `对基本单元电路的逐行刷新`,才能 `保证动态RAM内的信息不丢失`。
- 通常有三种方式刷新:集中刷新、分散刷新和异步刷新。

### 集中刷新

- 集中刷新是在规定的一个 `刷新周期`内,对 `全部存储单元`集中一段时间逐行进行刷新,此刻必须停止读/写操作。

  - 例如,对 128× 128 矩阵的存储芯片进行刷新时,若存取周期为 0.5us,刷新周期为 2 ms(占 4 000 个存取周期),

    - 则对 128 行集中刷新共需 64 us(占 128 个存取周期),
    - 其余的 1936 us(共 3872 个存取周期)用来读/写或维持信息
  - 由于在这 64 us 时间内不能进行读/′写操作,故称为“死时间”,又称访存“死区”,

    - 所占比率为 128/4000 x 100%=3.2%,称为死时间率。
    - ![🥰03/06/2022 10:38:38](https://cdn.jsdelivr.net/gh/xuchaoxin1375/pictures@main/images/20220306103836.png)

### 分散刷新

- 分散刷新:把对每行的刷新分散到各个工作周期中。
- 这样，一个存储器的系统工作周期分为两部分:前半部分用于正常读、写或保持;后半部分用于刷新某一行。
- 这种刷新方式增加了系统的 `存取周期`，如存储芯片的存取周期为 0.5us，则系统的存取周期为 1us。
- 分散刷新的优点是没有死区;
- 缺点是加长了 `系统的存取周期`，降低了整机的速度
- ![🥰03/06/2022 10:42:56](https://cdn.jsdelivr.net/gh/xuchaoxin1375/pictures@main/images/20220306104255.png)
- $t_{c}=t_{M}+t_{R}$
- $t_{c}表示新的系统存取周期;t_{M}表示读写或维护操作时间;t_{R}表示刷新操作时间$

### 异步刷新

- 异步刷新是前两种方法的结合，它既可缩短“死时间”，又能充分利用最大刷新间隔为 2ms 的特点。
- 具体做法是将刷新周期除以行数，得到两次刷新操作之间的时间间隔 t,利用逻辑电路每隔时间 t 产生一次刷新请求。
- 这样可以避免使 CPU 连续等待过长的时间，而且减少了刷新次数，从根本上提高了整机的工作效率。
- 异步刷新是前两种方式的结合,它既可缩短“死时间”,又充分利用最大刷新间隔为 2 ms 的特点
- 例如,对于存取周期为 0.5us,排列成 128×128 的存储芯片,可采取在 2 ms 内对 128 行各刷新一遍(且仅一遍),即每隔 15.6 us(2 000 us / 128us=15.6 us)刷新一行,而 `每行刷新`的所需时间仍为 0.5 us
- 这样,刷新一行只停止一个存取周期,但 `对每行来`说,刷新间隔时间仍 2ms.而“死时间”缩短为 0.5 us。
- ![🥰03/06/2022 10:54:39](https://cdn.jsdelivr.net/gh/xuchaoxin1375/pictures@main/images/20220306105435.png)

### summary

DRAM 的刷新需注意以下问题:

- ① 刷新 `对CPU是透明`的，即刷新 `不依赖于外部的访问`(刷新不占用 cpu 资源,但是会在 DRAM 刷新的时候阻碍 cpu 对存储的访问);
- ② 动态 RAM 的刷新单位是行，因此刷新操作时仅需要行地址;
- ③ 刷新操作类似于读操作，但又有所不同。刷新操作仅给栅极电容补充电荷，不需要信息输出。另外，刷新时不需要选片，即整个存储器中的所有芯片同时被刷新。

## 存储芯片的架构

半导体存储芯片的基本结构

- 半导体存储芯片采用超大规模集成电路制造工艺,在一个芯片内集成具有记忆功能的存储矩阵、译码驱动电路和读/写电路等
- `译码驱动`能把 `地址总线`送来的 `地址信号`翻译成 `对应存储单元的选择信号`,该信号 `在读/写电路的配合下完成对被选中单元的读/写操作`。
- `读/写电路包括读出放大器和写入电路`,用来完成读/写操作。

  - 存储芯片通过 `地址总线`﹑`数据总线`和 `控制总线`与外部连接。
- 数据线的位数与芯片容量 `有关`,地址线和数据线的位数 `共同反映`存储芯片的容量。

  - `地址线`是单向输入的,其 `位数`与芯片容量 `有关`。
  - `数据线`是双向的(有的芯片可用 `成对出现的数据线`分别作为输入或输出),
  - 其 `位数与芯片可读出或写入的数据位数有关`。
  - 例如,地址线为 10 根,数据线为 4 根,则芯片容量为$2^{10}\times4$ K 位;
  - 如地址线为 14 根,数据线为 1 根,则其容量为$2^{14}=2^{4}\times2^{10}=16k$位。
- `控制线`

  - 主要有 `读/写控制线`与 `片选线`,`两种`。
  - 读/写控制线决定芯片进行读/写操作,`片选线`用来选择存储芯片。
  - 不同存储芯片的读/写控制线和片选线可以不同。
    - 有的芯片的 `读/写控制线`共用 1 根(如芯片2114) ,有的分用两根(如 6264) ;
    - 有的芯片的 `片选线`用1根(如芯片2114) ,有的用 2 根(如 6264)。
  - 由于半导体存储器是由许多芯片组成的,为此需用片选信号来确定哪个芯片被选中。
  - 例如,一个 64K×8 位的存储器可由 `32 片 16 Kx1 位`的存储芯片组成
  - 但每次读出一个存储字时,只需选中 8 片。
  - ![🥰03/06/2022 12:30:50](https://cdn.jsdelivr.net/gh/xuchaoxin1375/pictures@main/images/20220306123049.png)
-
