[toc]

## 推理的形式结构

- 数理逻辑的主要任务是用数学的方法研究推理

### 前提推理结论的基本概念

- **推理**:指从**前提**出发推出**结论**的思维过程
- **前提**是已知的**命题公式集合**,
- **结论**是从前提出发应用推理规则推出的**命题公式**

### 前提合取式

- 前提合取式指一个推理中的前提内的所有命题的合取式,例如某个推理的前提包含命题$A_1,\cdots,A_k$,则其前提合取式为$A_1\wedge{\cdots}\wedge{A_k}$

## 有效推理

- 设$A_1,\cdots,A_k,B$都是命题公式,且出现的命题变项个数为$n$,并设命题$t$:$A_1\wedge{\cdots}\wedge{A_k}$;
- 若对于这$k+1$个命题公式中出现的$n$个命题变项的**任意**一组赋值,
  - 要么$t$为假,
  - 要么$t$和$B$同时为真,
- 则称
  - 由**前提$A$:$A_1,\cdots,A_k$**推出得结论$B$得**推理**是**有效的**或**正确的**,
  - $B$是有效的**结论**

## 推理形式结构

### 推理的形式结构@推理的记号

- 设前提为集合$\Gamma$,将$\Gamma$推出$B$的推理记为$\Gamma{\vdash}B$

- 称形式结构:$\Gamma\vdash{B}$或$\{A_1,\cdots,A_k\}\vdash{B}$为**推理的形式结构**

### 推理正确性符号

- 设前提为集合$\Gamma:\{A_1,\cdots,A_k\}$,
  - 若推理是正确的,则记为$\Gamma\models{B}$;另一种记号式$A_1\wedge{\cdots}\wedge{A_k}\Rightarrow{B}$
  - 否则(推理错误)记为$\Gamma\not\models{B}$

### 形式推理中的符号辨析$\Leftrightarrow$,$\Rightarrow$

- $A\Rightarrow{B}$ 表示蕴含式$A\to{B}$为重言式,$\Rightarrow$可以称为正确推理号
- $A\Leftrightarrow{B}$表示等价式$A\leftrightarrow{B}$是重言式,$\Leftrightarrow$可以称为等值号

### 前提间顺序无关性

- 由前提$A$推出的结论$B$的推理的正确性和诸前提($A$中的前提)的排列次序无关

### 推理正确性表格



- 给定一个推理,其前提合取式和结论的真值组合共有4种可能,以下是前提合取式和结论真值表
  - 任何包含$n$个命题变元的推理的真值表的行数为$2^{n}$

- 表1

  | cases | $t:A_1\wedge{\cdots}\wedge{A_k}$ | $B$  | $A\vdash{B}$ validity |
  | ----- | -------------------------------- | ---- | --------------------- |
  | 1     | 0                                | 0    | $A\models{B}$         |
  | 2     | 0                                | 1    | $A\models{B}$         |
  | 3     | 1                                | 0    | $A\not\models{B}$     |
  | 4     | 1                                | 1    | $A\models{B}$         |

- 根据定义,只要不出现情况(3),则推理就是正确的

- 结论正确,则推理一定正确(无论前提是否正确)

- 因此对于任何**推理**我们只需要关心其是否会发生情况(3)

  - 对于具体的$n$变元推理,就是检查其$2^{n}$个赋值下的真值表行是否出现情况(3)
  - 参考下一节的例子

### 推理正确与结论正确性辨析和说明

- 这里的推理是**形式推理**,而不是一般推理,有许多地方是抽象而且不符合直觉的(通常形式推理包容一般推理,但是形式推理中的某些规定不容易在一般推理的思考模式中理解)
- 形式推理中,推理正确并能保证结论$B$一定成立,因为前提可能就不成立,形式推理将前提不成立的推理情况规定为正确推理;这一点和蕴含联结词是类似的,具有抽象性
- 这和人们通常对推理的理解不同
  - 通常认为只有正确的前提下推出正确的结论才是正确的推理
  - 但是形式推理认为前提不正确,则推理一定正确而无论结论是否正确
  - 因此只有当**前提成立**并且**推理正确**才能确定**结论成立**,也就是上节表格中的情况(4)
  - 仅知道推理正确,则其结论可能是不成立的,如上表情况(2)

## 例

### 列真值表判定给定推理的正确性

- 判断$\{p,p\to{q}\}\vdash{q}$

  - 根据定义,将构造推理的真值表(对前提内的所有命题进行合取,再和结论构成真值表的两列)

  - | $p,q$ | $t:p\wedge{(p\to{q})}$ $\Leftrightarrow$ $p\wedge{q}$ | $q$  |
    | ----- | ----------------------------------------------------- | ---- |
    | 00    | 0                                                     | 0    |
    | 01    | 0                                                     | 1    |
    | 10    | 0                                                     | 0    |
    | 11    | 1                                                     | 1    |

  - 由于$t,q$两列没有出现$(t,q)=(1,0)$行(真前提推出假结论),所以推理$\{p,p\to{q}\}\vdash{q}$正确

## 基于蕴含式的推理形式结构

### 两种等价的推理形式结构

- 由前提$A:A_1,\cdots,A_k$推出$B$的推理的形式结构$\{A_1,\cdots,A_k\}\vdash{B}$等同于蕴含式$A_1\wedge{\cdots}\wedge{A_k}\to{B}$
- 推理正确:$\{A_1,\cdots,A_k\}\models{B}$等同于$A_1\wedge{\cdots}\wedge{A_k}$ $\Rightarrow$ $B$

### 原理

- 由命题公式$A:A_1,\cdots,A_k$推出$B$的推理正确当且仅当$t$:$A_1\wedge{\cdots}\wedge{A_k}$ $\to{B}$为重言式

  - Note:$t\leftrightarrow{B}$为重言式记为$t\Leftrightarrow{B}$,$t\to{B}$为重言式记为$A\models{B}$

- 证明:

  - 必要性:若$A\models{B}$,说明任意赋值都不存在$t$真$B$假的情况,从而只有以下三类可能的情况

    - 表1

      | t    | B    | $t\to{A}$ |
      | ---- | ---- | --------- |
      | 0    | 0    | 1         |
      | 0    | 1    | 1         |
      | 1    | 1    | 1         |

    - 因此复合命题$t\to{B}$在任何赋值下都是真值,即$t\to{B}$是**重言式**

  - 充分性

    - 若$t\to{B}$是重言式,则$t,B$的在任何赋值$t\to{B}$为真,而$t\to{B}$为真的所有可能如上表1所示
    - 所以$A\models{B}$

## 推理定律

在判断推理正确性的等式演算中,有许多**重言蕴含式**要经常使用,它们统称为**推理定律**

1. $A$ $\Rightarrow$ $ {(A\vee{B})}$附加律
2. $(A\wedge{B})$ $\Rightarrow$ ${A}$化简律
3. $(A\to{B})\wedge{A}$ $\Rightarrow$ $ {B}$假言推理
4. $(A\to{B})\wedge{\neg{B}}$ $\Rightarrow$ $ {\neg{A}}$拒取式
5. $(A\vee{B})\wedge{\neg{B}}$ $\Rightarrow$ $ {A}$析取三段论
6. $(A\to{B})\wedge{(B\to{C})}$ $\Rightarrow$ $ {(A\to{C})}$假言三段论
7. $(A\leftrightarrow{B})\wedge{(B\leftrightarrow{C})}$ $\Rightarrow$ $ {(A\leftrightarrow{C})}$等价三段论
8. $(A\to{B})\wedge(C\to{D})\wedge{(A\vee{C})}$ $\Rightarrow$ $ (B\vee{D})$构造性二难
   - $(A\to{B})\wedge{(\neg{A}\to{B})}$ $\Rightarrow$ $ {B}$构造性二难的特殊形式

9. $(A\to{B})\wedge{(C\to{D})}\wedge{(\neg{B}\vee{\neg{D}})}$ $\Rightarrow$ $ {(\neg{A}\vee{\neg{C}})}$破坏性二难

这九条推理定律可以产生9条推理规则,构成推理系统中的推理规则集

## 自然推理系统P

### 证明的定义:命题公式来描述证明

- 证明是一个描述**推理过程**的**命题公式序列**,其中的每个公式或者是**已知前提**,或者是由前面的公式应用推理规则得到的结论(中间结论或推理中的结论)

### 形式系统$I$

一个**形式系统**$I$被定义为以下4个 部分:

- 非空的**字母表**$A(I)$
- $A(I)$中符号构造的**合式公式集**$E(I)$
- $E(I)$中一些**特殊的公式**组成的**公理集**$A_{X}(I)$
- **推理规则集**$R(I)$

将$I$具体的表示为一个4元组$<A(I),E(I),A_{X}(I),R(I)>$



### 形式系统的子系统:形式语言系统和演算系统

- 设形式系统$I=<A(I),E(I),A_{X}(I),R(I)>$
  1. 将$<A(I),E(I)>$称为$I$的**形式语言系统**
  2. 将$<A_{X}(I),R(I)>$称为**形式演算系统**


### 两类形式系统

#### 自然推理系统

- 从任意给定的前提出发,引用系统中的**推理规则**进行推理演算,最后得到的命题公式是推理的结论
  - 结论是有效结论,可能是重言式,也可能不是

#### 公理推理系统

- 它只能从**若干条给定的公理**出发,应用系统中的**推理规则**进行推理演算,得到的结论是系统中的**重言式**,称为系统中的**定理**

### 自然推理系统P

- 字母表:
  1. 命题变项符号:$p,q,r\cdots,p_i,q_i,r_i\cdots$
  2. 联结词符号:$\neg,\vee,\wedge,\to,\leftrightarrow$
  3. 逗号和括号:`"(" , ")" , ","`
- 合式公式:
  - 当使用联结词集{$\neg,\vee,\wedge,\to,\leftrightarrow$}时,合式公式定义(递归定义)为:
    1. 单个命题变项是合式公式
    2. 若$A,B$都是合式公式,则$(\neg{A})$,$(A\vee{B})$,$(A\wedge{B})$,$(A\to{B}),(A\leftrightarrow{B})$是合式公式.
    3. 有限次应用(2)中的方式形成的符号串是合式公式
  - 合式公式也成为**命题公式**,简称**公式**

- 推理规则:
  - **前提引入**规则:在证明的任何步骤都可以引入前提
  - **结论引入**规则:在证明的任何步骤所得到的结论都可以作为后继证明的前提
  - **置换**规则:在证明的任何步骤,命题公式中的**子公式**都可以用**等值的公式置换**,得到公式序列中的**又一个公式**
  - **假言推理**规则(**分离**规则):若证明的**公式序列**中已经出现过$A\to{B}$和$A$,则由假言推理定律$(A\to{B})\wedge{A}\Rightarrow{B}$可知,$B$是前提$A\to{B}$和$A$的**有效结论**;由结论引入规则,可以将$B$引入到命题序列中
  - **附加**规则:推理定律一节提到的9条推理定律对应的推理规则

## 推理过程中的命题公式序列对应的证明

- 设:前提$A_1,\cdots,A_k$,结论$B$,公式序列$C$: $C_1,\cdots,C_l$
  - 若$C_{i}$($i=1,\cdots,l$)是由某个前提$A_{j}$或者可以由公式序列中$C_i$前面的公式(中间结论)应用推理规则得到,且$C_{l}=B$(公式序列$C$的最后一个公式回到结论$B$)
  - 则称公式序列$C_1,\cdots,C_l$是由$A_1,\cdots,A_{k}$推出结论$B$的**证明**









