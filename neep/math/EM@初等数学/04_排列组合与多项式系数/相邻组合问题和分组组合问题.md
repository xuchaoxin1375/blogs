[toc]

# abstract

- 向量组合问题和分组问题

# 相邻组合问题

## 捆绑法和插入法

- 在组合数学中，捆绑法和插入法是排列组合的推广，主要用于解决**相邻组合**与**不相邻组合**的问题。

### 例子🎈

- 若有A,B,C,D,E五个人排队，要求A和B两个人必须站在**相邻位置**，则有多少种排队方法？

  - 将A和B两个人捆绑，对(A,B),C,D,E进行排列，	
    - (A,B)内部排列有$P_2^2$种排法，记$X=(A,B)$
    - X,C,D,E有$P_4^4=4!=24$种排法
    - 由乘法原理,共有$S=P_2^2\times P_4^4$=$48$种

- 若有A,B,C,D,E五个人排队，要求A和B两个人必须不站在一起，则有多少种排队方法？

  - 方法1:使用**互补(互斥)法**配合**捆绑法**所有排法减去相邻排法即得不相邻排法，$P_5^5-P_2^2\times P_4^4=5!-2!4!=72$

  - 方法2:使用**插空法**,将A,B插入安全位置(`$X$Y$Z$`),

    - 其中X,Y,Z表示可以相邻的$C,D,E$的某一种排列
    - 将$A,B$插入`$`所指的位子都能够满足$A,B$不相邻的要求
    - $A,B$间又可以产生$A_2^2$种排列
    - 由乘法原理有$A_3^3C_4^2A_2^2=6\times{6}\times2=72$

    

# 分组问题

- 排列组合问题通常可以分为两类:
  - 如果问题本身是有序的,往往容易直接求解
  - 如果问题包含了无序部分,可以先按照有序的做法进行计算,然后再去出重复的倍数即可
- 对于一般的分组问题,将问题细分为2个层次(假设我们要将一批互不相同的元素分配成k个组)
  1. 一个是元素组队问题(队伍内部元素没有顺序,队伍之间也不区分顺序)
  2. 另一个是组完队后个组分配到不同目标问题(队伍内部没有顺序,但是队伍之间要区分顺序)
- 其中问题2是我们很熟悉的乘法原理,只需要知道每个组的人数$n_1,\cdots,n_k$,利用组合数,可得
  - 第1个组有$\binom{n}{n_1}$种组队方法
  - 第2个组有$\binom{n-\sum_{j=1}^{1}n_j}{n_2}$=$\binom{n-n_1}{n_2}$种方法
  - $\vdots$
  - 第$i$个组有$\binom{n-\sum_{j=0}^{i-1}n_j}{n_i}$种方法
  - 因此给$k$个组分配元素的方法数是分配各个组方法数的乘积
- 而问题1是队伍间无序的,意味着$S_0$={{1,2},{3,4},{5,6}}和$T_0$={{3,4},{1,2},{5,6}}是同一个分组,不可重复计数
  - 在问题1种,元素{1,2}和{3,4}分别去目标$A_1,A_2$是一种方法,分别去$A_2,A_1$则是另一种方法
  - 然而问题2仅考虑组队的方法数,不考虑将组队分配到具体的目标,因此如果直接使用乘法原理和组合数公式,则是将队伍间顺序一同考虑进来,导致重复计数;
  - 幸运的是,这种重复是有规律性的,我们可以通过去除重复来从有序解变为所需的无序解
  - 将问题2种的结果除以合适的去重因子,即可得到不重复的问题1的答案
  - 若某个分组方案中有$r$个组的组内成员数一样,那么重复因子为$A_{r}^{r}$,对于复杂分组,可能有多个重复因子

##  均匀分组

### 最简单的均匀分组



* n个人,均分成n个组,有几种分法?
  - 显然只有一种分法("每组一个人"这一种分组方法):$\frac{A_n^n}{A_n^n}=1$
  - 这种计算方法假设n个组之间有顺序之分,再除以重复的倍数得到结果
  - n个人,均分成n个组,每组至少一个人,执行n个不同任务有几方法
    - $A_n^n$=$\binom{n}{1}\cdots\binom{1}{1}$ 

- 6个人,均分为3组,有多少种方法?
  - 本问题是一个无序组合问题:
    - 分组之间不关系顺序
    - 组内成员不关心顺序
    - 只关心组内成员的构成

- 解决无序组合问题可以建立合适的**有序排列模型**(直接乘法原理)再去序的方式间接解决**无序的组合问题**
  - 设三个组的编号分别为$1,2,3$,并设它们的人员组合分别是$A_1,A_2,A_3$,并且它们是有序的
    - 根据组合数计数原理,设6个人编号为1,2,3,4,5,6,从中选两个人组成一组,所有的可能有$\binom{6}{2}$=$15$种
    - 记所有可能的二人组的集合为$S$,其中包含15个元素,且$A_i\in{S},i=1,2,3$

  - 划分第一组两个人时有$\binom{6}{2}$种可能,划分第二组时有$\binom{4}{2}$种可能,划分第三组时有$\binom{2}{2}$种可能
  - 根据乘法原理(解决有序排列问题),$A_1,A_2,A_3$这3个组将产生$C_6^2C_4^2C_2^2$种可能
  - 例如$A_1,A_2,A_3$的一种可能的取值是;$A_1$={1,2},$A_2$={3,4},$A_3$={5,6},将这个方案记为$S_0$={{1,2},{3,4},{5,6}}
  - $S_0$中包含的3个二元组元素,它们的排列有$A_3^3=6$种,这6种排列应当视为同一种分组方案
  - 因此,取出排列组间排列带来的重复计数,需要除以均分的组数的全排列,即$\frac{C_6^2C_4^2C_2^2}{A_3^3}$=$15$种

### 均匀分组问题模型

- $n=km$个元素均分为$k$组(每组$m$个),有多少种方法?

- 解:

  - $$
    \frac{\prod_{i=0}^{k-1}{C_{n-mi}^{m}}}{A_k^k}
    $$

- 例如,6人分3组,$k=3,m=6/3=2$

  - $$
    \frac{\prod_{i=0}^{3-1}{C_{6-2i}^2}}{A_3^3}
    =\frac{C_6^2C_4^2C_2^2}{6}=15
    $$


### 均匀但组间有序分组模型

- $n=km$个元素均分为$k$组(每组$m$个),依次分配给任务$A_1,\cdots,A_n$,有多少种方法?
- $\prod_{i=0}^{k-1}{C_{n-mi}^{m}}$

## 不均匀分组

- 将6个人分成3个组,各有$3,2,1$个人,有多少种方法?
  - 根据组合数和乘法原理,有$C_6^3C_3^2C_1^1$=$60$
  - 由于3个组每个组的人数互不相等,因此不需要去序

## 局部均匀分组

- n个元素作局部均匀分组,分为$s$=$p+t$个**组**,其中

  - 前$p$个组的元素数目:$n_1=n_2=\cdots=n_p$=$m$,其余组元素各不相同,不妨设为$r_j$个,$m\neq{r_j};j=1,2,\cdots,q$

  - 均匀部分:

    - $p$个元素相同的组有$\prod_{i=0}^{p-1}C_{n-mi}^{m}$可能,其中包含了一个重复倍数$A_p^p$

  - 其他均匀部分:

    - 甚于分组可能还包含了一个局部均匀分组问题,,递归的做下去,直到剩余的分组(设有$t$个组)元素数量互不相等

  - 严格不均匀部分:

    - 后剩余的$t$个组仍然按照分组和连乘的方式计算,但是不需要除以重复倍数(因为各组的元素数目不同)

      

### 例

- 10个不同的人,需要分为6个组,其中有3个组每组2个人,另外2组每组1个人;还有一个组2个人:$\frac{(C_{10}^2C_8^2C_6^2)(C_4^1C_3^1)C_2^2}{A_3^3A_2^2}$

### 综合

- 6个人分成3组,每组至少1个人,有多少种分法?
  - 分为3类情况
  - 6=1+1+4
  - 6=1+2+3
  - 6=2+2+2
  - 第1类是局部均匀分组
    - $\frac{C_6^1C_5^1C_4^4}{A_2^2}=15$
  - 第2类是不均匀分组
    - $C_6^1C_5^2C_3^3$=60
  - 第3类是均匀分组:
    - $\frac{C_6^2C_4^2C_2^2}{A_3^3}$=15
  - 由加法原理合计有$90$种
- 注意和隔板法问题相区别

###  例题

- 某交通岗有3人,从每周7天中,每天安排1人值班,每人至少值班2天,不同的排法种数(D)?

  A:5040

  B:1260

  C:210

  D:630

- 解:由于每个人至少值两天班,我们将7天拆分为$7=\sum_{i=1}^{3}{x_i},x_i\geqslant{2}$,其中$x_i$是分配给某个值班人员的天数

  - 本例中,$7\%2=3\cdots1$,可见7可以分解为$2+2+(2+1)$,即{2,2,3}
  - 将7天中的2天分配给员工1有$C_7^2$种情况
  - 将剩余的$5$天中的2天分配给员工2有$C_5^2$种情况
  - 将剩余的3天分全部分配给第3个员工有$C_3^3$种情况
  - 注意到第1个员工和第2个员工分配到的天数是相同的,
    - 意味着可以对调两个员工的值班日期从而产生新的安排方法
    - 员工1,2,3的值日天数的不同组合可能有
      1. {2,2,3}
      2. {2,3,2}
      3. {3,2,2}
    - 上述3种分割方案都可以产生$C_7^2C_5^2C_3^3$种情况(3个集合都属于允许元素重复的特殊集合:**多重集**)
    - 所以共有$3C_7^2C_5^2C_3^3$种方案
    - 分割方案还可以不列举出来,仅通过$\frac{A_3^3}{A_2^2}=3$来计算(不尽相异物)这里将包含{2,2,3}的多重集中的两个2作区别:$2_1,2_2$
    - ${2_1,2_2}$做排列(有$A_2^2$种),不改变多重集,例如{$2_1,2_2,3$}={$2_2,2_1,3$}

- $\frac{C_{7}^{2}C_{5}^{2}C_3^3}{A_{2}^{2}}A_{3}^{3}$=630

  

