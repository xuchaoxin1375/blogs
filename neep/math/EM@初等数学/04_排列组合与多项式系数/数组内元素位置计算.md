[toc]



## 内存中的数组元素位置计算

- 设一个数组元素占用L=3个存储单元
  - $a_1,a_2,a_3;a_4,a_5,a_6$
  - $其中a_i表示第i个存储单元$
- $那么元素e_0占用a_1,a_2,a_3;元素e_1占用a_4,a_5,a_6$
  - $Loc(e_0)=a_1,e_0的起始地址就是a_1的地址$
  - $Loc(e_1)=a_1+1\times L=a_1+1\times3=a_4$
  - $Loc(e_i)=Loc(e_0)+i\times L=a_1+iL=a_{1+iL}$
  - $Loc(e_j)=Loc(e_i)+(j-i)L$

### 闭区间内的元素数量MatchedSize

- $MatchedSize(index_i,index_j)表示,序列\{a_n\}的元素a_i到元素a_j之间连同两端包含了多少个元素$

- $$
  |\Delta|=increment(index1,index2)=|index2-index1|
  \\
  m(start,end)=MatchedSize(index1,index2)=|\Delta|+1=|index2-index1|+1
  $$

  - 模式串匹配算法(朴素匹配/kmp)

  - 特殊矩阵压缩/解压公式

    - k对角矩阵,其第i行形如:

      - $$
        0\cdots0,a_{i,j_1},\cdots,a_{i,j_k},0\cdots 0
        $$

    - 问,$a_{i,j_k}前面的非零元素有几个$; 

      - 上面的问题看似不是MatchedSize的应用场合,但其实,稍微想一下,也可以转化为MatchedSize

      - $$
        0\cdots0,\underbrace{a_{i,j_1},\cdots,a_{i,j_{k-1}}}_{几个元素?},a_{i,j_k},0\cdots 0
        $$

        

      - $m_{(1,k-1)}=j_{k-1}-j_1+1$

      - $特别的,三对角矩阵(k=3)中,第i行元素a_{i,j}前面的非零元素有几个?$

        - $j_1=i-1,j_{k-1}=j-1$
        - $elems=m(i-1,j-1)=(j-1)-(i-1)+1=j-i+1$

    - 问:$\underbrace{a_i\cdots a_{j-1}}_{子串长度为L}a_{j}$

      - $其中a_j的序号为y$
      - $那么a_i的序号x为多少?$
        - $坐标差\Delta=j-i=L$
        - $\underbrace{a_ia_{i+1}\cdots a_{j-1}a_{j}}_{子串长度为L+1}$
          - $L+1=y-x+1即: x=y-L$
        - $a_i\underbrace{a_{i+1}\cdots a_{j-1}a_{j}}_{子串长度为L}$
          - $x=y-L$

### 😎小结

- 从一维序列的计数公式&坐标公式的各种形式上看

- $关系式|j-i|=|\Delta(L)|足以解决所有相关问题(以坐标差\Delta为核心)$

  - $$
    \\坐标差=增量长度
    \\
    j-i=\Delta=L_{[a_{i},a_{j-1}]}=L_{[a_{j},a_{i+1}]}\tag{core}\geqslant 0
    \\
    (i-j=-\Delta)
    $$


    $$
    L_{[a_{i},a_{j}]}=|\Delta|+1=|j-i|+1
    $$

- $将坐标差\Delta用闭区间距离L或(L\pm 1)表示出来$

- $L通常是a_i\sim a_j闭区间内的元素数量,这时候\Delta(L)=L-1$

利用上面的关系式列等式,$所有关于i,j,L的值都可以一步计算的时间内得出$

公式中都具有坐标差(假设i<j)

- $闭区间元素数量L=\Delta+1=j-i+1$
- $闭区间左端点坐标i可以由:i=j-\Delta=j-L+1;$
- $右端点坐标j=i+\Delta=i+L-1$