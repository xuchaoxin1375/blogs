[toc]

## 两类基本计数原理

- 以下两种计数原理是解决计数问题的最基本理论依据
- 它们分别给出了"分类"和"分步"完成一件事(任务)的方法总数的计算方法

### 分类加法计数原理

- 完成任务A有$n$**类**办法,第$i$类办法中有$m_i$种不同的方法$(i=1,2,\cdots,n)$,那么完成A的方法数有$N=\sum_{i=1}^{n}m_i$

### 分类乘法计数原理

- 完成任务B有n个**步骤**,第$i$个步骤有$m_i$种不同的方法,则完成B的方法数有$N=\prod_{i=1}^{n}m_i$
- 注意,乘法原理是各个步骤之间的顺序的,如果对调两个步骤仍能得到一样的效果,则该问题不是乘法原理能直接使用范围
  - 例如组合问题:设有$a,b,c$三个球,从中取出2个球可以产生多少种可能?
    - 分步骤:第1步取第1个球,第2步取第2个球
    - 连乘:得到的结果是$3\times{2}$=6种
    - 枚举这些可能:
      - ab
      - ac
      - ba
      - bc
      - ca
      - cb

    - 容易发现,其中ab,ba是同一组合ac,ca是同一组合;bc,cb是同一组合

  - 后面将介绍如何**间接地**利用乘法原理来计算组合数


### 小结

- **分类**问题中,各类方法种的任意一种方法都可以把任务**完成**
- **分步**问题中,每个步骤的任何一种方法都不能把这件事完成,只有把所有步骤依次全部完成,才能算把任务完成
- 在计数完成任务的方法总数时,所有方法必须完成任务的所有步骤,才算合格的方法能被计入总数(分类任务可以理解为步骤只有"一步"的的分步问题)

## 排列组合

- 排列与组合都是基于乘法计数原理的经典计数模型

- 从A,B,C球中任意取2个放入X,Y两个盒子中,这件事情有多少种做法?
  - 这个事情有两个步骤,:
    1. 取2个球
    2. 将2个球放入两个盒子
  - 还可以这样划分步骤:
    1. 先取一个球放入盒子X中
    2. 再取下一个球放入另一个盒子Y中
  - 上面两种步骤的划分方式不同在于:
    - 第1种两个步骤操作相差较大,将取球和放盒分开了
      - 第1步有3种可能(A,B),(A,C),(B,C)
      - 第2步,将2个选好的球放入2个盒子种有2种可能
    - 第2种两个步骤内容操作基本一样,都是取球并放盒
      - 第1步X盒中可能放入A,B,C中的一个,有3种可能
      - 第2步剩下2个球中取一个放入Y,有2种可能
    - 综上,有$3\times{2}=6$种
  - 这类问题,球的数量比盒子多,每个盒子都要放球,所以逐个地考虑盒子可以放入球的可能比逐个考虑球放入盒子的方式更合适

### 元素

- 上例中"取球入盒"类型的问题,我们把被取的对象称为**元素**,放入的盒子抽象为**位置**(还可以理解为**顺序**)
- 上例用元素抽象重新描述为:3个不同元素,任意取2个<u>分别</u>占据既有2个位置中的一个

### 排列

- 从$n$个不同元素中任意取$m(m\leqslant{n})$个元素,并按照一定的顺序成一列,称为从$n$个**不同元素**中取$m$个元素的一个**排列**
- 两个**排列相同**含义为:组成排列的**元素相同**,并且元素的**排列顺序**也相同
- 一个排列对应完成一个事件的方法

### 排列数

- 从$n$个不同元素中取出$m(m\leqslant{n})$个元素的所有<u>排列的个数,</u>叫做从n个不同元素中取出$m$个元素的**排列数**(排列个数的简称),通常用$A_n^{m}$表示(A是英文Arrangement的首字母,有时也用$P_{n}^{m}$表示(P是Permutation的首字母))
- $A_n^{m}$计算公式:
  - $A_{n}^{m}$是完成某个事件有m步骤,第i个步骤有$n+1-i$种方式完成,则完成m个步骤的方法数为
    - $n$
    - $n-1$
    - $\cdots$
    - $n-(m-1)$
  - 即$A_{n}^{m}=\prod_{i=1}^{m}(n+1-i)$=$\frac{n!}{(n-m)!}$

### 全排列

- 从n个元素中取出n个元素(全部元素)构成的排列,称为这n个元素的**全排列**
- 此时排列数公式中$m=n$,$A_n^{n}=n!$

### 排列数性质

- $$
  A_n^m+mA_n^{m-1}=A_{n+1}^m
  $$

#### 从计数原理角度解释该公式

- 设原元素集A中有n个元素,编号为$1,\cdots,n$
- 现在,为集合添加一个新的元素(第$n+1$个元素),得到元素集合B,显然$B=A\cup{\{n+1\}}$,$A\sub{B}$
- 从B中选出m个元素记为$A_{n+1}^{m}$,其中包括两类
  - 取出的m个元素不包含第$n+1$号元素,仅从A中选出$m$个元素,共有$A_{n}^{m}$种排列
  - 取出的m个元素包含第$n+1$号元素,其余$m-1$个元素来自于A,共有$A_{n}^{m-1}$中取法,考虑到这n个元素的不同排列顺序会差生不同的排列;考虑将第$n+1$号放置在长度为m的排列中有m种可能,(或者元素插入到来自A的m-1个元素有$m-1+1=m$种插法),因此这类情况会产生$mA_{n}^{m-1}$种排列
  - 从而有等式$A_n^m+mA_n^{m-1}=A_{n+1}^m$成立

#### 从排列数展开公式推导

- $$
  \begin{aligned}
  A_n^m+mA_n^{m-1}=&\frac{n!}{(n-m)!}+m\frac{n!}{(n-m+1)!}\\
  =&\frac{n!(n-m+1)+n!\cdot{m}}{(n-m+1)!}\\
  =&\frac{n!(n-m+1)+n!\cdot m}{(n-m+1)!}\\
  =&\frac{(n+1)n!}{[(n+1)-m]!}\\
  =&\frac{(n+1)!}{[(n+1)-m]!}\\
  =&A_{n+1}^{m}
  \end{aligned}
  $$

  



### 组合

- 从$n$个不同元素中任意取出$m(m\leqslant{n})$个元素<u>并成一组</u>,称为从$n$个不同元素中任取m个元素的一个**组合**
  - 组合不强调组合内元素的顺序,如果组合内的元素相同,即使元素间顺序有所不同,仍然视为同一个组
  - 排列可以看作是一种带有组内顺序的组合
  - 一个组合也是完成事情的一种方法

### 组合数

- 从$n$个不同元素中任意取出$m(m\leqslant{n})$个元素的所有可能的<u>组合的个数</u>,称为**组合数**("组合个数"的简称),用符号$C_n^m$(Combination)或国际上更习惯用$\binom{n}{m}$,(组合数和二项式系数(binomial coefficient有密切关系)

### 组合数于排列数的关系👺

- 组合数不像排列数那样容易定义事件的m个步骤,但是根据组合数和排列数的定义,得到关于组合数和排列数的关系书

- $A_n^m=C_n^mA_m^m$这个式子表示,从n个元素中抽取m个元素构成的**排列数**$A_n^m$等于从$n$个元素中抽取m个元素构成**组合数**乘以各组内包含的长度为m的排列数$A_m^m$;根据乘法计数原理可知,等式角度容成立
- 利用则个关系式,可以得到组合数的计算方法(公式)
- 从n个不同元素中任取m个元素排列,可以分2步完成:
  - 选取元素:从n个不同元素中,任取m个元素的组合,有$C_n^m$种方法
  - 排位置:对选中的m个元素进行全排列,有$A_m^m=m!$种方法
- 可见,$C_n^m=\frac{A_n^m}{A_m^m}$=$\frac{1}{m!}\frac{n!}{(n-m)!}$ (0)
  - $=\frac{n(n-1)\cdot(m+1)}{(n-m)!}$ (1)
  - $=\frac{n(n-1)\cdots(n-m+1)}{m!}$ (2)
  - 形式1中,分子分母各有$n-m$项
  - 形式2中,分子分母各有$m$项,当m较小的时候,通常采用形式2进行笔算或口算,m较大时,采用形式1计算(在组合数性质中,我们将重新提及这个问题)
    - 例如:$C_5^2=\frac{5\times{4}}{2\times{1}}=10$
      - 用形式1也可以算:$C_5^2=\frac{5\times{4}\times{3}}{3\times{2}\times{1}}$=$10$
- 由形式0,当$m=n$时,由于$0!=1$,所以$C_n^n=1$;当$m=0$时,$C_n^0=1$,可见$C_n^0=C_n^n=1$
- 对于组合数$C_n^m$,$m\in\mathbb{N},n\in\mathbb{N^+}$,$m\leqslant{n}$

- $$
  \begin{aligned}
  C^m_n=&\frac{1}{m!}\frac{n!}{(n-m)!}
      \\
      =&\frac{1}{\prod\limits_{k=1}^{m}k}\cdot
      \prod_{k=1}^{m}{(n-k+1)}
      \\
      =&{\prod\limits_{k=1}^{m}k^{-1}}
      \prod_{k=1}^{m}{(n-k+1)}
      \\
      =&\prod_{k=1}^{m}\frac{(n-k+1)}{k}
  \end{aligned}
  $$

- 可见,组合数的展开算式分子和分母都有m项因子

- 可通过对排列数进行`去序`来得到对应的组合数结果

### 组合数的性质

1. $C^m_n=C^{n-m}_{n}$ 
2. $C^m_n+C^{m-1}_{n}=C^m_{n+1}$ 
3. $\sum_{i=0}^{n}C_n^{i}=(1+1)^n=2^{n}$
4. $C_{n+m}^{k}=\sum_{i=0}^{k}C_{n}^{i}C_{m}^{k-i}$

#### 计数原理的方法证明

- (1):从n个不同元素取出m个的组合后剩余n-m个元素,这n-m个元素构成长度为n-m的组合,这相当于从n个不同元素取出$m$个元素等价于从n个不同元素中保留$n-m$个元素,所以$C_n^m=C_n^{n-m}$
- (2):设原元素集A中有n个元素,编号为$1,\cdots,n$
  - 现在,为集合添加一个新的元素(第$n+1$个元素),得到元素集合B,显然$B=A\cup{\{n+1\}}$,$A\sub{B}$
  - 从B中选出m个元素记为$C_{n+1}^m$,其中包括两类
    - 取出的m个元素不包含第$n+1$号元素,仅从A中选出$m$个元素,共有$C_{n}^{m}$种组合
    - 取出的m个元素包含第$n+1$号元素,其余$m-1$个元素来自于A,共有$C_n^{m-1}$中取法
  - Note:本组合数性质和排列数性质中的$A_n^m+mA_n^{m-1}=A_{n+1}^m$相似但不同,组合没有元素顺序之分,因此$C_n^{m_1}$没有乘以顺序系数$m$
- (3)使用二项式定理显然
- (4)可以从概率论的角度证明,也可以构造两个集合:$A=\set{a_1,\cdots,a_n}$;$B=\set{b_1,\cdots,b_m}$
  - 从中抽出$k$个的方法有$\binom{n+m}{k}$个,可以分为$A,B$中分别取$i,k-i$个:
    - 由乘法原理$\binom{n}{i}\binom{m}{k-i}$
    - 再由加法原理:$\sum_{i=0}^{k}\binom{n}{i}\binom{m}{k-i}$
    - 所以$C_{n+m}^{k}=\sum_{i=0}^{k}C_{n}^{i}C_{m}^{k-i}$


#### 纯代数方法证明

1. $$
   C_n^m=\frac{n!}{m!(n-m)!}
   \\
   C_n^{n-m}=\frac{n!}{(n-m)!(n-(n-m))!}=\frac{n!}{(n-m)!m!}
   \\
   \therefore{C_n^m=C_n^{n-m}}
   $$

2. $$
   \\
   \begin{aligned}
   LHS=&\frac{A^m_n}{m!}+\frac{A^{m-1}_{n}}{(m-1)!}
   \\=&\frac{A^m_n+A^{m-1}_n\times m}{m!}\\
   =&\frac{\frac{n!}{(n-m)!}+\frac{n!}{(n-(m-1))!}\times m}{m!}
   \\
   =&\frac{\frac{(n-m+1)\times n!}{(n-m+1)\times (n-m)!}+\frac{n!}{(n-m+1))!}\times m}{m!}\\
   =&\frac{\frac{(n-m+1)\times n!}{(n-m+1)!}+\frac{n!\times m}{(n-m+1)!}}{m!}\\
   =&\frac{\frac{n!\times ((n-m+1)+m)}{(n-m+1)!}}{m!}
   \\
   =&\frac{\frac{ (n+1)\times n!}{(n-m+1)!}}{m!}\\
   =&\frac{\frac{ (n+1)!}{(n-m+1)!}}{m!}
   \end{aligned}
   \\\therefore{C^m_n+C^{m-1}_{n}=C^m_{n+1}}
   $$


## 笔算或口算中的排列组合👺

- 当$n,m$不太大时的计算建议

- 排列数:$A_n^m$=$n(n-1)\cdots(n-m+1)$,即有从n开始写,连写m项相乘即可
  - 例如$A_6^2$=$6\times{5}$,从6开始写,写两项即可
- 组合数:$\binom{n}{m}$=$\frac{A_n^m}{m!}$=$=\frac{n(n-1)\cdots(n-m+1)}{m!}$,即从n开始写,连写m项相乘作为分子,分母就是$m!$(从m开始写,写m项连乘)
  - 例如$\binom{6}{2}$=$\frac{6\times{5}}{2\times{1}}$=$15$

