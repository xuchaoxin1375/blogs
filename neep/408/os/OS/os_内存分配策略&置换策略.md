[toc]

# 内存分配策略和置换策略

> 在请求分页系统中,

- 可以采取两种分配策略

  - 固定分配
  - 可变分配

- 两种置换策略

  - 全局置换
  - 局部置换

- 分配策略和置换策略两者组合,共有三种可能的策略

  - 固定分配局部置换

    - 它为每个进程分配一定数目的物理块，在整个运行期间都不改变。

    - 所谓**局部置换**，是指如果进程在**运行中发生缺页**，则只能从分配给该进程在内存的页面中选出一页换出，然后再调入一页，以保证分配给该进程的内存空间不变。

      - 实现这种策略时，难以确定应为每个进程分配的物理块数目:
      - 太少会频繁出现缺页中断，
      - 太多又会降低 CPU和其他资源的利用率。

    - > 注意,固定分配要求进程的内存物理块不变,所以不可以配合全局置换(这试图改变物理块数,导致矛盾)

  -   可变分配全局置换

    - 这是**最易于实现**的物理块分配和置换策略，

    - 它为系统中的**每个进程分配一定数目的物理块**，操作系统**自身也保持一个空闲物理块队列**。

    - 所谓**全局置换**，是指如果进程在运行中发生缺页，系统从**空闲物理块队列**中取出一块分配给该进程，并将所缺页调入。

    - 这种方法比固定分配局部置换更加灵活，可以**动态增加进程的物理块**，但也存在弊端，

      - 如它会盲目地**给进程增加物理块，从而导致系统多道程序的井发能力下降**。
      - 先为每个进程分配一定数目的物理块，在进程运行期间可根据情况适当地增加或减少。

      

  - 可变分配局部置换

    - 它为**每个进程分配一定数目的物理块**，当某个进程**发生缺页时**，只允许**从该进程在内存的页面中选出一页换出**，因此**不会影响其他进程的运行**。
    - 若进程在运行中**频繁地缺页**，则系统再**为该进程分配若干物理块**，直至该进程**缺页率趋于适当程**
      **度；**
    - 反之，若进程运行中的缺页率特别低，则可适当减少分配给该进程的物理块。
    - 比起可变分配全局置换，这种方法**不仅可以动态增加进程物理块的数量**，还能**动态减少进程**
      **物理块的数量**，在保证进程不会过多地调页的同时，也保持了系统的多道程序井发能力。
    - 当然它需要更**复杂的实现，也需要更大的开销**，但对比频繁地换入／换出所浪费的计算机
      资源，这种牺牲是值得的。

    


(1)固定分配局部置换

(2）可变分配全局置换

(3）可变分配局部置换
为每个进程分配一定数目的物理块，当某进程发生缺页时，只允许从该进程在内存的页面中选出一页换出，因此不会影响其他进程的运行。若进程在运行中频繁地发生缺页中断，则系统再为该进程分配若干物理块，直至该进程的缺页率趋于适当程度;反之，若进程在运行中的缺页率特别低，则可适当减少分配给该进程的物理块，但不能引起其缺页率的明显增加。这种方法在保证进程不会过多地调页的同时，也保持了系统的多道程序并发能力。当然它需要更复杂的实现，也需要更大的开销，但对比频繁地换入/换出所浪费的计算机资源，这种牺牲是值得的。