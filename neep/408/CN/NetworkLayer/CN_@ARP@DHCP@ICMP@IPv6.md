

[toc]

# @ARP@DHCP@ICMP@IPv6

## ARP地址解析协议🎈

- [Address Resolution Protocol - Wikipedia](https://en.wikipedia.org/wiki/Address_Resolution_Protocol)

- 无论网络层使用什么协议，在实际网络的<u>链路上传送数据帧时，最终必须使用硬件地址</u>。
- 所以需要一种方法来完成IP地址到MAC地址的映射，这就是地址解析协议（Address ResolutionProtocol,.ARP)。
- 每台主机都设有一个ARP高速缓存，用来存放本局域网上各主机和路由器的IP地址到MAC地址的映射表，称ARP表。
- 使用ARP来动态维护此ARP表。
- ARP工作在**网络层**
- 另外还有RARP
  - [Reverse Address Resolution Protocol - Wikipedia](https://en.wikipedia.org/wiki/Reverse_Address_Resolution_Protocol)
  - **逆地址解析协议**（Reverse Address Resolution Protocol，RARP），是一种[网络协议](https://zh.wikipedia.org/wiki/网络协议)，[互联网工程任务组](https://zh.wikipedia.org/wiki/互联网工程任务组)（IETF）在RFC903中描述了RARP[[1\]](https://zh.wikipedia.org/wiki/逆地址解析协议#cite_note-1)。
  - RARP使用与ARP相同的报头结构，**作用与[ARP](https://zh.wikipedia.org/wiki/ARP)相反**。
  - RARP用于将[MAC地址](https://zh.wikipedia.org/wiki/MAC地址)转换为[IP地址](https://zh.wikipedia.org/wiki/IP地址)。其因为较限于IP地址的运用以及其他的一些缺点，因此渐为更新的[BOOTP](https://zh.wikipedia.org/wiki/BOOTP)或[DHCP](https://zh.wikipedia.org/wiki/DHCP)所取代
  - 类似于[ARP](https://zh.wikipedia.org/wiki/地址解析协议)的报文格式主要差别在于帧类型代码为0x8035（ARP为0x0806），操作码为3请求（ARP为1），4应答（ARP为2）

### 工作原理

- 主机A欲向本局域网上的某台主机B发送IP数据报时，先在其**ARP高速缓存**中查看有无主机B的**IP地址**。
  - 如果有，就可**查出其对应的硬件地址**，再将此硬件地址写入MAC帧，然后通过局域网将该MAC帧发往**此硬件地址**。
  - 如果没有，那么就通过使用目的MAC地址为FF-FF-FF-FF-FF-FF的帧来封装并<u>**广播ARP请求分组（广播发送**）</u>，使同一个<u>局域网里的所有主机都收到此ARP请求</u>。
  - 主机B收到该ARP请求后，向主机A发出**ARP响应分组（单播发送）**，分组中包含主机B的IP与MAC地址的映射关系，主机A收到ARP响应分组后就**将此映射写入ARP缓存**，然后按查询到的硬件地址发送MAC帧。
  - ARP由于“看到了IP地址，所以它**工作在网络层**，
  - 而NAT路由器由于“看到了”**端口**，所以它工作在**传输层**。
    - 对于某个协议工作在哪个层次，可以通过协议的工作原理进行猜测
- ARP用于解决**同一个局城网**上的主机或路由器的**IP地址和硬件地址的映射问题**。
  - 如果所要找的主机和源主机**不在同一个局域网上**，那么就要通过ARP找到一个位于本局域网上的某个路由器的硬件地址，然后把分组发送给这个路由器，让这个路由器把分组转发给下一个网络。
  - 剩下的工作就由下一个网络来做，尽管ARP请求分组**是广播发送的**，但ARP响应分组是**普通的单播**，即从一个源地址发送到一个目的地址

#### 使用ARP的4种典型情况总结如

- ```mermaid
  flowchart LR
  	subgraph net1
  	 H1 & H2
  	end
  	
  	%%subgraph R1.
  	%%R1
  	%%end
  	
  	subgraph net2
  	 H3
  	end
  	
  	subgraph net3
  	 H4
  	end
  	net1<-->R1[(R1)]<-->net2<-->R2[(R2)]<--->net3
  	
  ```

  

#### 发送方为主机

- 1)发送方是主机(如H1),要把P数据报发送到本网络上的另一台主机(如H2)。
  - 这时H1在网1用ARP找到目的主机H2的硬件地址。
- 2)发送方是主机(如H1),要把P数据报发送到另一个网络上的一台主机(如H)。
  - 这时H1,用ARP找到与网1连接的路由器R1,的硬件地址，剩下的工作由R1,来完成。

#### 发送方为路由器

- 3)发送方是路由器(如R1),要把IP数据报转发到与R1,连接的网络(网2)上的一台主机(如H3)。
  - 这时R1,在网2用ARP找到目的主机H3的硬件地址。
- 4)发送方是路由器(如R1),要把IP数据报转发到网3上的一台主机(如H4)。
  - 这时R1在网2用ARP找到与网2连接的路由器R2的硬件地址，剩下的工作由R2来完成。
- 从IP地址到硬件地址的解析是自动进行的，主机的用户并不知道这种地址解析过程。
  - 只要主机或路由器和本网络上的另一个已知IP地址的主机或路由器进行通信，ARP就会自动地将这个IP地址解析为数据链路层所需要的硬件地址。



## DHCP动态主机配置协议🎈

- 动态主机配置协议(Dynamic Host Configuration Protocol,DHCP)常用于给主机动态地分配P地址，它提供了**即插即用的联网机制**，这种机制允许一台计算机加入新的网络和获取P地址而不用手工参与。
- DHCP是**应用层协议**，它是基于UDP的。

### DHCP的工作原理

- 使用**客户/服务器**模式。

  - 需要IP地址的主机在启动时就向DHCP服务器广播发送**发现报文**，这时该主机就成为**DHCP客户**。
  - 本地网络上所有主机都能收到此广播报文，但只有**DHCP服务器**才回答此广播报文。
  - DHCP服务器先在其数据库中查找该计算机的配置信息。

  - 若找到，则返回找到的信息。

  - 若找不到，则从服务器的IP地址池中取一个地址分配给该计算机。
  - DHCP服务器的**回答报文**称为**提供报文**。

### 交换过程

- DHCP服务器和DHCP客户端的交换过程如下：
- 1)DHCP客户机**广播“DHCP发现”消息**，
  - 试图找到**网络中的DHCP服务器**，以便从DHCP服务器获得一个P地址。
  - 源地址为0.0.0.0，目的地址为255.255.255.255.
- 2)DHCP服务器<u>收到“DHCP发现”消息后</u>,(试探地)**广播“DHCP提供”消息**，
  - 其中包括提供给DHCP客户机的IP地址。
  - **源地址**为DHCP服务器地址(T=IP(DHCP_server))，**目的地址为255.255.255.255**(全LAN的广播地址)
- 3)DHCP客户机<u>收到“DHCP提供”消息</u>，
  - 如果接受该IP地址，那么就**广播“DHCP请求”消息**向DHCP服务器<u>请求提供IP地址</u>(请求将这个IP地址执行分配给客户机)
  - 源地址为0.0.0.0,目的地址为255.255.255.255.
    - 和**DHCP发现消息**的地址对一样
- 4)DHCP服务器广播“DHCP确认”消息，(正式地)将IP地址分配给DHCP客户机。
  - 源地址为DHCP服务器地址T，目的地址为255.255.255.255.
- DHCP允许网络上配置多台DHCP服务器，当DHCP客户机发出“DHCP发现”消息时，有可能收到多个应答消息。
  - 这时，DHCP客户机只会挑选其中的一个，通常挑选最先到达的。

#### 租用期

- DHCP服务器分配给DHCP客户的IP地址是**临时的**，因此DHCP客户只能**在一段有限的时间内使用**这个分配到的IP地址。
- DHCP称这段时间为**租用期**。
  - 租用期的数值应由DHCP服务器自己决定，DHCP客户也可在自己发送的报文中提出对租用期的要求。

#### DHCP过程通信特点

- DHCP的客户端和服务器端需要**通过广播方式来进行交互**，原因是在DHCP执行初期，客户端不知道服务器端的IP地址，而在执行中间，客户端并未被分配P地址，从而导致**两者之间的通信必须采用广播的方式**。
- 采用UDP而不采用TCP的原因也很明显：TCP需要建立连接，如果连对方的P地址都不知道，那么**更不可能通过双方的套接字建立连接。**
- DHCP是应用层协议🎈
  - 因为它是通过**客户/服务器模式**工作的，DHCP客户端向DHCP服务器请求服务，
  - 而其他层次的协议是没有这两种工作方式的。

### 小结

- 发现
  - 希望DHCP服务器发现新的客户机C(需要IP地址)
- 提供
  - DHCP server回应发现信号,提供IP地址X给客户机C
- 请求
  - 客户机C表示愿意接受这个地址X作为自己的IP地址
- 确认
  - DHCP server 正式将X提供给客户机C

## ICMP网络控制报文协议🎈

- [Internet Control Message Protocol - Wikipedia](https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol)
- [互联网控制消息协议  (wikipedia.org)](https://zh.wikipedia.org/wiki/互联网控制消息协议#时间戳请求)

- 为了提高IP数据报交付成功的机会，在网络层使用了网际控制报文协议（Internet ControlMessage Protocol,ICMP)来让主机或路由器报告差错和异常情况。
- ICMP报文作为IP层数据报的数据，加上数据报的首部，组成P数据报发送出去。ICMP是IP层协议。
- ICMP报文的种类有两种，即ICMP差错报告报文和ICMP询问报文。
- ICMP差错报告报文用于目标主机或到目标主机路径上的路由器向源主机报告差错和异常情况。

### 5种类型

- 共有以下5种类型：
- 1)终点不可达。
  - 当路由器或主机不能交付数据报时，就向源点发送终点不可达报文。
- 2)源点抑制。
  - 当路由器或主机**由于拥塞而丢弃数据报时**，就向源点发送源点抑制报文，使源点知道应当把数据报的发送速率放慢。
- 3)时间超过。
  - 当路由器收到生存时间(TTL)为零的数据报时，除丢弃该数据报外，还要向**源点发送时间超过报文**。
  - 当终点在预先规定的时间内不能收到**一个数据报的全部数据报片时**，就把已收到的数据报片都丢弃，并向源点发送时间超过报文。
- 4)参数问题。
  - 当路由器或目的主机收到的数据报的首部中有的字段的值不正确时，就丢弃该数据报，并向源点发送参数问题报文。
- 5)改变路由（重定向）。
  - 路由器把改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器（可通过更好的路由）。

### 不应发送ICMP差错报告报文

- 不应发送ICMP差错报告报文的几种情况如下：
- 1)对ICMP差错报告报文不再发送ICMP差错报告报文。
- 2)对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文。
- 3)对具有组播地址的数据报都不发送ICMP差错报告报文。
- 4)对具有特殊地址(如127.0.0.0或0.0.0.0)的数据报不发送1CMP差错报告报文。

### ICMP询问报文

- ICMP询问报文有2种类型：
  - 回送请求和回答报文;
  - 时间戳请求和回答报文

#### 不再使用 ICMP 报文

- 信息请求与回答报文
- 掩码地址请求和回答报文
- 路由器询问和通告报文
- 源点抑制报文
  - 比如拥塞导致IP分组被丢弃,路由向源主机发送的ICMP就是源点抑制报文

### ICMP的应用

#### PING

- [ping (networking utility) - Wikipedia](https://en.wikipedia.org/wiki/Ping_(networking_utility))

- 分组网间探测
  - PING（用来测试两台主机之间的连通性）

- PING中使用了ICMP**回送请求和回答报文**，
- 它**直接使用网络层的ICMP**,而未使用传输层的TCP或UDP.
- PING是一种运用了ICMP协议的网络工具,个人认为它工作在网络层
  - ref:[What OSI layer is ping? - Quora](https://www.quora.com/What-OSI-layer-is-ping)
  - The ping command uses the services of the Internet Control Message Protocol (ICMP), the latter being encapsulated in the IP header. 
  - Therefore, the ping utility operates basically on **layer 3** (the Network layer) of the OSI model.

#### Traceroute/Tracert

- 跟踪分组经过的路由
  - Traceroute
    - for unix
  - Tracert
    - for windows
- Traceroute(Tracert)使用了ICMP**时间超过报文**。
- Traceroute/Tracert工作在**网络层**。



## IP组播

- 为了能够支持像视频点播和视频会议这样的多媒体应用，网络必须实施某种有效的组播机制。
  - 使用多个单播传送来仿真组播总是可能的，但这会引起主机上大量的处理开销和网络上太多的交通量。
  - 人们所需要的组播机制是让源计算机一次发送的单个分组可以抵达用一个组地址标识的若干目标主机，并被它们正确接收。
- 组播一定**仅应用于UDP**,它对将报文同时送往多个接收者的应用来说非常重要。
  - 而**TCP是一个面向连接的协议**，它意味着分别运行于两台主机(由P地址来确定)内的两个进程（由端口号来确定）之间存在一条连接，因此**会一对一地发送**。
  - 使用组播的缘由是，有的应用程序要把一个分组发送给多个目的地主机。
  - 不是让源主机给每个目的地主机都发送一个单独的分组，而是让源主机把**单个分组发送给一个组播地址**，该组播地址标识一组地址。
  - 网络（如因特网）把这个分组的副本**投递给该组中的每台主机**。
  - 主机可以选择加入或离开一个组，因此一台主机可以同时属于多个组。
  - 因特网中的P组播也使用组播组的概念，每个组都有一个特别分配的地址，要给该组发送的计算机将使用这个地址作为分组的目标地址。
  - 在IPV4中，这些地址在D类地址空间中分配，而IPV6也有一部分地址空间保留给组播组。

### IGMP

- [Internet Group Management Protocol - Wikipedia](https://en.wikipedia.org/wiki/Internet_Group_Management_Protocol)

- 主机使用一个称为IGMP（因特网组管理协议）的协议**加入组播组**。
- 它们使用该协议通知本地网络上的路由器关于要接收发送给某个组播组的分组的愿望。
- 通过扩展路由器的路由选择和转发功能，可以在许多路由器互联的支持硬件组播的网络上面实现因特网组播。
-  主机组播时仅发送一份数据，只有数据在传送路径**出现分岔时才将分组复制后继续转发**。
- 因此，对发送者而言，数据只需发送一次就可发送到所有接收者，大大减轻了网络的负载和发送者的负担。
- 组播需要**路由器的支持**才能实现，能够运行组播协议的路由器称为**组播路由器**。

### IGMP与组播路由算法

- 要使路由器知道组播组成员的信息，需要利用因特网组管理协议（Internet GroupManagement Protocol,.IGMP)。
- 连接到局域网上的组播路由器还必须和因特网上的其他组播路由器协同工作，以便把组播数据报用最小代价传送给所有组成员，这就需要使用组播路由选择协议。
- IGMP并不是在因特网范围内对所有组播组成员进行管理的协议。
- IGMP不知道IP组播组包含的成员数，也不知道这些成员分布在哪些网络上。🎈
- IGMP让连接到本地局域网上的**组播路由器知道本局域网上是否有主机参加或退出了某个组播组**。
- IGMP应视为**网际协议IP的一个组成部分**，其工作可分为两个阶段。
  - 第一阶段：
    - 当某台主机<u>加入新的组播组时，该主机应向组播组的**组播地址**发送一个IGMP报文，</u>声明自己**要成为该组的成员**。
    - **本地的组播路由器**收到IGMP报文后，将组**成员关系**转发给因特网上的**其他组播路由器**。
  - 第二阶段：
    - 因为组成员关系是动态的，本地组播路由器要周期性地探询本地局域网上的主机，以便知道这些主机是否仍继续是组的成员。
    - 只要对**某个组有一台主机响应**，那么组播路由器就认为**这个组是活跃的**。
    - 但一个组在经过**几次的探询后仍然没有一台主机响应**时，则**不再将该组的成员关系转发**给其他的组播路由器。
    - 组播路由选择实际上就是要找出**以源主机为根结点的组播转发树**，其中每个分组在每条链路上只传送一次（即在组播转发树上的路由器不会收到重复的组播数据报）。
    - 不同的多播组对应于不同的多播转发树：同一个多播组，对不同的源点也会有不同的多播转发树。
    - 在许多由路由器互联的**支持硬件多点传送**的网络上实现因特网组播时，主要有三种路由算法：
      - 第一种是基于链路状态的路由选择；
      - 第二种是基于距离-向量的路由选择；
      - 第三种可以建立在任何路由器协议之上，因此称为**协议无关的组播(PM)**。

### IP组播地址🎈

- IP组播使用D类地址格式。
- D类地址的前四位是1110，因此D类地址范围是<u>**224.0.0.0~239.255.255.255**</u>。
  - E类地址高4位是1111,首字节从11110000=15*16=240开始
- 每个D类P地址标志一个组播组。
- 组播数据报和一般的IP数据报的**区别**是，前者使用D类IP地址作为目的地址，并且首部中的**协议字段值是2**，表明使用IGMP。
- 需要注意的是：
  - 1)组播数据报也是“尽最大努力交付”，不提供可靠交付。
  - 2)组播地址只能用于目的地址，而不能用于源地址。
  - 3)对组播数据报不产生ICMP差错报文。因此，若在PNG命令后面键入组播地址，将永远不会收到响应。
  - 4)并非所有的D类地址都可作为组播地址。
- IP组播可以分为两种：
  - 一种只在本局域网上进行**硬件组播**：
  - 另一种则在因特网的范围内进行组播。
    - 在因特网上进行组播的最后阶段，还是要把组播数据报在局域网上**用硬件组播**交付给组播组的所有成员  
- **IANA**拥有的**以太网组播地址的范围**是从01-00-5E-<u>00-00-00</u>到01-00-5E-<u>7F-FF-FF</u>。
  - 我们展开低24位,发现,<u>低23位的取值是可以0也可以1</u>,而第25位还都是1
  - 48-25=24-1=23
  - 0000 0000-0000 0000-0000 0000
  - 0111 1111-1111 1111-1111 1111
  - 不难看出，在每个地址中，只有**23位**可用作组播。(低23位)
    - 这只能和D类IP地址中的(低位)23位**有一一对应关系**。
    - D类IP可以划分为三部分:
      - 4+5+23=32
      - 高4位作为D类地址
      - 中间5位是不分配
      - 低23位对应于可分配的**物理地址的组播部分**
  - D类IP地址可供分配的有28位，可见在这28位中，**前5位**不能用来构成以太网的**硬件地址**
  - 例如
    - IP组播地址224.128.64.32(即E0-80-40-20)和另一个IP组播地址224.0.64.32（即E0-00-40-20)转换成以太	网的**硬件组播地址**都是01-00-5E-00-40-20。	
    - 由于<u>组播IP地址与以太网硬件地址的映射关系不是唯一</u>的，因此收到组播数据报的主机，还要在IP层利用软件进行过滤，把**不是本主机要接收的数据报丢弃**。



## 物理地址@MAC地址结构

- 在局域网中，硬件地址又称为物理地址，或 MAC 地址。
-  802 标准所说的“地址”严格地讲应当是每一个站的“名字”或标识符。
  - 大家都早已习惯了将这种 48 位的“名字”称为“地址”

### MAC 层的硬件地址

- 请注意，如果连接在局域网上的主机或路由器安装有多个适配器，那么这样的主机或路由器就有多个“地址”。
- 更准确些说，这种48 位“地址”,应当是某个接口的标识符。

-  IEEE 802 标准规定**MAC 地址字段**可采用6 字节( 48位) 或2 字节( 16位) 这两种中的一种。

#### 高24位

-  IEEE 的注册管理机构RA 负责**向厂家分配地址字段6 个字节中的前三个字节**(即高位24 位)，称为组织唯一标识符。

#### 低24位

-  地址字段6 个字节中的后三个字节(即低位24 位) 由厂家自行指派，称为扩展唯一标识符，必须保证生产出的适配器没有重复地址。

- 48 位的MAC 地址的每**一个地址块**可以生成 $2^{24}$ 个不同的地址。
  - 这种 48 位地址称为MAC-48，它的通用名称是 EUI-48。
  - 生产适配器时，6 字节的MAC 地址已被固化在适配器的 ROM，因此，MAC 地址也叫做硬件地址 (hardware address) 或物理地址。
  - “MAC 地址”实际上就是适配器地址或适配器标识符 EUI-48。

### 单站地址@组地址@广播地址🎈

- IEEE 规定**地址字段的第一字节**的最低位为 I/G 位。
- I/G 表示Individual / Group。
  - 当I/G 位= 0 时，地址字段表示一个**单站地址**。
  - 当I/G 位= 1 时，表示**组地址**，用来进行**多播**（以前曾译为**组播**）。
    - 此时，IEEE 只分配地址字段前三个字节中的 23 位。
- 当I/G 位分别为0 和1 时，一个地址块可分别生成 $2^{23}$ 个单个站地址和$2^{23}$ 个组地址。
- 所有48 位都为1 时，为广播地址。只能作为目的地址使用。

### 系统对组播帧和广播帧的处理

- 主机在接收一个广播帧或组播帧时，其CPU所要做的事情有何区别？
- 在接收**广播帧**时
  - 主机通过其**适配器**[即网络接口卡(NIC)]接收每个广播帧，然后将其传递给操作系统。
  - CPU执行协议软件，并界定是否接收和处理该帧。
- 在接收**组播帧**时，CPU要**对适配器进行配置**，而适配器根据特定的组播地址表来接收帧。
  - 凡与此<u>组播地址表不匹配的帧</u>都将被NIC丢弃。
  - 因此在组播的情况下是**适配器NIC**而不是CPU决定**是否接收一个帧**。

### 全球管理与本地管理

- IEEE 把地址字段第一字节的最低第 2 位规定为G/L 位，表示Global / Local。
- 当G/L 位= 0 时，是全球管理（保证在全球没有相同的地址），厂商向IEEE 购买的OUI 都属于全球管理。
- 当G/L 位= 1 时，是本地管理，这时用户可任意分配网络上的地址

### 适配器检查MAC 地址

- 适配器从网络上每收到一个 **MAC 帧**就首先用硬件<u>检查MAC 帧中的MAC 地址</u>。

  - 如果是发往本站的帧则收下，然后再进行其他的处理。

    - “发往本站的帧”包括以下三种帧：

      - 单播(unicast) 帧（一对一）

      - 广播(broadcast) 帧（一对全体）

      - 多播(multicast) 帧（一对多）

  - 否则就将此帧丢弃，不再进行其他的处理。

- 所有的适配器都**至少能够识别前两种帧**，即能够识别<u>单播地址和广播地址</u>。

  - 有的适配器可用编程方法<u>识别多播地址</u>。

- 只有<u>目的地址才能使用广播地址和多播地址</u>。

- 以混杂方式(promiscuous mode) 工作的以太网适配器只要“听到”有帧在以太网上传输就都接收下来。

#### 例

- 以太网组播IP地址X=224.215.145.230应该映射到的组播MAC地址是（A）。
  - A.01-00-5E-57-91-E6
    B.01-00-5E-D7-91-E6
    C.01-00-5E-5B-91-E6
    D.01-00-5E-55-91-E6
- 分析:
  - 将组播IP地址X视为32=4+5+23的三部分结构,其中4+5可以视为整体,它们跨越了第一个字节,并且占领了第二个字节的第一bit
    - 为了的得到X对应的组播MAC地址,只需要将第2,3,4字节展开为二进制形式:
      - 215=1101 0111
      - 145=128+2+15=1000 0000+17=1001 0001
        - 17=1 0000+1=1 0001
      - 230=255-25=1111 1111- (1 0000+1001)=1110 0110
      - 得到第2,3,4字节序列:1<u>101 0111 1001 0001 1110 0110</u>
        - 去掉第一个bit,余下23位(<u>101 0111 1001 0001 1110 0110</u>)转为16进制:
        - 57;91;E6
    - 而组播MAC高位25bit部分固定为**01-00-5E**
  - 以太网组播地址块的范围是01-00-5E-00-00-00~01-00-5E-7F-FF-FF,而且在每个地址中，只有后23位可用组播。这样，只能和D类P地址中的后23位有一一对应关系。D类P地址可供分配的有28位，可见这28位中的前5位不能用来构成以太网硬件地址。
  - 215的二进制为11010111,其中，在映射过程中最高位为0，
  - 因此215.145.230的二进制为01010111.10010001.11100110，对应的十六进制数是57-91-E6。

## 相关机构

### IANA

- **互联网号码分配局**（英语：**Internet Assigned Numbers Authority**，缩写IANA），是一家[互联网](https://zh.wikipedia.org/wiki/互联网)地址指派机构，管理国际[互联网](https://zh.wikipedia.org/wiki/互联网)中使用的[IP地址](https://zh.wikipedia.org/wiki/IP地址)、[域名](https://zh.wikipedia.org/wiki/域名)和许多其它参数的机构。
- IP地址、自治系统成员以及许多顶级和二级域名分配的日常职责由[国际互联网注册中心](https://zh.wikipedia.org/w/index.php?title=国际互联网注册中心&action=edit&redlink=1)（IR）和[地区注册中心](https://zh.wikipedia.org/w/index.php?title=地区注册中心&action=edit&redlink=1)承担。
- IANA是由[ICANN](https://zh.wikipedia.org/wiki/ICANN)管理的。

###  ICANN

- **互联网名称与数字地址分配机构**（**I**nternet **C**orporation for **A**ssigned **N**ames and **N**umbers），简称**ICANN**，
  - 是位于[美国](https://zh.wikipedia.org/wiki/美国)[加利福尼亚](https://zh.wikipedia.org/wiki/加利福尼亚)的非营利社团，主要由[互联网协会](https://zh.wikipedia.org/wiki/互联网协会)的成员组成，创建于1998年9月18日，目的是接管包括管理[域名](https://zh.wikipedia.org/wiki/域名)和[IP地址](https://zh.wikipedia.org/wiki/IP地址)的分配等与[互联网](https://zh.wikipedia.org/wiki/互联网)相关的任务，这些任务曾由其它组织（特别是[IANA](https://zh.wikipedia.org/wiki/IANA)）代表[美国政府](https://zh.wikipedia.org/wiki/美国政府)来执行，但ICANN仍受美国政府及法律管理。
  - ICANN同时也负责`L.root-servers.net`这组[根域名服务器](https://zh.wikipedia.org/wiki/根域名伺服器)的运作。

# IPv6地址以及简写

## 冒号十六进制记法

* 在 IPv6 中，每个地址占 128 位，地址空间大于$3.4\times10^{38}$。
* 为了使地址再稍简洁些，IPv6 使用冒号十六进制记法(colon hexadecimal notation, 简写为 colon hex)。
* 每个 16 位的值用十六进制值表示，各值之间用冒号分隔。例如：
  * 68E6:8C64:FFFF:FFFF:0000:1180:960A:FFFF

## 各种形式的ipv6地址简写

### 段内0简写

> 某一段内4个十六进制数全为0时

* 68E6:8C64:FFFF:FFFF:0000:1180:960A:FFFF
  * 在十六进制记法中，允许把数字前面的 0 省略。
    * 例如把 0000 中的
      `前三个 0 省略，写成 1 个 0`。
      * 68E6:8C64:FFFF:FFFF:0:1180:960A:FFFF

### 0压缩

> 适用于单段全0和连续多段全0的省略不写

- 冒号十六进制记法可以允许零压缩 (zero compression)，即一连串连续的零可以为一对冒号所取代。
  FF05:0:0:0:0:0:0:B3 可进一步压缩为：
  FF05::B3
- 注意：在任一地址中只能使用一次零压缩。

### 点分十进制IPv6记法(点分十进制记法的 `后缀`)

* 冒号十六进制记法可结合使用点分十进制记法的后缀，这种结合在 IPv4 向
  IPv6 的转换阶段特别有用。
  - 例如：0:0:0:0:0:0:128.10.2.1
    再使用零压缩即可得出： ::128.10.2.1
    - 可以看到,这种记法混用了 `:`以及 .
  - CIDR 的斜线表示法仍然可用。
    - 例如：60 位的前缀 12AB00000000CD3 可记为：
      - 12AB:0000:0000:CD30:0000:0000:0000:0000/60
      - 或 12AB::CD30:0:0:0:0/60 （零压缩）
      - 或 12AB:0:0:CD30::/60 （零压缩）

# android 手机ip查看

- 打开全部参数
  - 状态信息(包括手机号码/wlan mac 地址/ip 地址/电量/卡槽等信息)
  - 在不太老的android设备,可以在设置中搜索 `ip`关键词



