[toc]

# CN_@DNS@HTTP

## åŸŸåçš„å¯¹åº”å…³ç³»

- å¦‚æœä¸€å°ä¸»æœºé€šè¿‡ä¸¤å—ç½‘å¡è¿æ¥åˆ°ä¸¤ä¸ªç½‘ç»œï¼ˆå¦‚æœåŠ¡å™¨åŒçº¿æ¥å…¥ï¼‰ï¼Œé‚£ä¹ˆå°±å…·æœ‰ä¸¤ä¸ªPåœ°å€ï¼Œæ¯ä¸ªç½‘å¡å¯¹åº”ä¸€ä¸ªMACåœ°å€ï¼Œæ˜¾ç„¶è¿™ä¸¤ä¸ªPåœ°å€å¯ä»¥æ˜ å°„åˆ°åŒä¸€ä¸ªåŸŸåä¸Šã€‚
- æ­¤å¤–ï¼Œå¤šå°ä¸»æœºä¹Ÿå¯ä»¥æ˜ å°„åˆ°åŒä¸€ä¸ªåŸŸåä¸Šï¼ˆå¦‚è´Ÿè½½å‡è¡¡ï¼‰ï¼Œ
- ä¸€å°ä¸»æœºä¹Ÿå¯ä»¥æ˜ å°„åˆ°å¤šä¸ªåŸŸåä¸Šï¼ˆå¦‚è™šæ‹Ÿä¸»æœºï¼‰ã€‚ 

### åŸŸåå’ŒIPåœ°å€

- Internetä¸Šæä¾›è®¿é—®çš„ä¸»æœºä¸€å®šè¦æœ‰IPåœ°å€ï¼Œè€Œä¸ä¸€å®šè¦æœ‰åŸŸåï¼Œ
-  **åŸŸååœ¨ä¸åŒçš„æ—¶é—´å¯ä»¥è§£æå‡ºä¸åŒçš„IPåœ°å€**ï¼Œå› æ­¤**å¯ä»¥ç”¨å¤šå°æœåŠ¡å™¨æ¥åˆ†æ‹…è´Ÿè½½** ã€‚
- ä¹Ÿå¯ä»¥æŠŠå¤šä¸ªåŸŸåæŒ‡å‘åŒä¸€å°ä¸»æœºIPåœ°å€ï¼Œ
-  IPå­ç½‘ä¸­ä¸»æœºä¹Ÿå¯ä»¥ç”±ä¸åŒçš„åŸŸåæœåŠ¡å™¨æ¥ç»´æŠ¤å…¶æ˜ å°„ï¼ŒDå¯¹ã€‚

## åŸŸåæœåŠ¡å™¨

- åŸŸåç³»ç»Ÿ(Domain Name System)ï¼›
- åŸŸåæœåŠ¡å™¨(Domain Name Server)ï¼›
- åŸŸåæœåŠ¡(Domain Name Service)

- å› ç‰¹ç½‘çš„åŸŸåç³»ç»Ÿè¢«è®¾è®¡æˆä¸€ä¸ª**è”æœºåˆ†å¸ƒå¼çš„æ•°æ®åº“ç³»ç»Ÿ**ï¼Œå¹¶é‡‡ç”¨å®¢æˆ·/æœåŠ¡å™¨æ¨¡å‹ã€‚
- åŸŸååˆ°IPåœ°å€çš„è§£ææ˜¯ç”±è¿è¡Œåœ¨åŸŸåæœåŠ¡å™¨ä¸Šçš„ç¨‹åºå®Œæˆçš„ï¼Œä¸€ä¸ªæœåŠ¡å™¨æ‰€è´Ÿè´£ç®¡è¾–çš„ï¼ˆæˆ–æœ‰æƒé™çš„ï¼‰èŒƒå›´ç§°ä¸ºåŒº(ä¸ä»¥â€œåŸŸâ€ä¸ºå•ä½)ï¼Œå„å•ä½æ ¹æ®å…·ä½“æƒ…å†µæ¥åˆ’åˆ†è‡ªå·±ç®¡è¾–èŒƒå›´çš„åŒºï¼Œä½†åœ¨ä¸€ä¸ªåŒºä¸­çš„æ‰€æœ‰ç»“ç‚¹å¿…é¡»æ˜¯èƒ½å¤Ÿè¿é€šçš„ï¼Œæ¯ä¸ªåŒºè®¾ç½®ç›¸åº”çš„æƒé™åŸŸåæœåŠ¡å™¨ï¼Œç”¨æ¥ä¿å­˜è¯¥åŒºä¸­çš„æ‰€æœ‰ä¸»æœºçš„åŸŸååˆ°IPåœ°å€çš„æ˜ å°„ã€‚
- æ¯ä¸ªåŸŸåæœåŠ¡å™¨ä¸ä½†èƒ½å¤Ÿè¿›è¡Œä¸€äº›åŸŸååˆ°IPåœ°å€çš„è§£æï¼Œè€Œä¸”è¿˜å¿…é¡»å…·æœ‰è¿å‘å…¶ä»–åŸŸåæœåŠ¡å™¨çš„ä¿¡æ¯ã€‚
- å½“è‡ªå·±ä¸èƒ½è¿›è¡ŒåŸŸååˆ°IPåœ°å€çš„è½¬æ¢æ—¶ï¼Œèƒ½å¤ŸçŸ¥é“åˆ°ä»€ä¹ˆåœ°æ–¹å»æ‰¾å…¶ä»–åŸŸåæœåŠ¡å™¨ã€‚
- DNSä½¿ç”¨äº†å¤§é‡çš„åŸŸåæœåŠ¡å™¨ï¼Œå®ƒä»¬ä»¥å±‚æ¬¡æ–¹å¼ç»„ç»‡ã€‚
- æ²¡æœ‰ä¸€å°åŸŸåæœåŠ¡å™¨å…·æœ‰å› ç‰¹ç½‘ä¸Šæ‰€æœ‰ä¸»æœºçš„æ˜ å°„ï¼Œç›¸å,è¯¥æ˜ å°„åˆ†å¸ƒåœ¨æ‰€æœ‰çš„DNSä¸Šã€‚
- ä¸»è¦æœ‰4ç§ç±»å‹çš„åŸŸåæœåŠ¡å™¨

### 1.æ ¹åŸŸåæœåŠ¡å™¨

- æ ¹åŸŸåæœåŠ¡å™¨æ˜¯æœ€é«˜å±‚æ¬¡çš„åŸŸåæœåŠ¡å™¨ï¼Œæ‰€æœ‰çš„æ ¹åŸŸåæœåŠ¡å™¨éƒ½çŸ¥é“æ‰€æœ‰çš„é¡¶çº§åŸŸåæœåŠ¡å™¨çš„IPåœ°å€ã€‚æ ¹åŸŸåæœåŠ¡å™¨ä¹Ÿæ˜¯æœ€é‡è¦çš„åŸŸåæœåŠ¡å™¨ï¼Œ
- ä¸ç®¡æ˜¯å“ªä¸ªæœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼Œè‹¥è¦å¯¹å› ç‰¹ç½‘ä¸Šä»»ä½•ä¸€ä¸ªåŸŸåè¿›è¡Œè§£æï¼Œ**åªè¦è‡ªå·±æ— æ³•è§£æï¼Œå°±é¦–å…ˆè¦æ±‚åŠ©äºæ ¹åŸŸåæœåŠ¡å™¨ã€‚**

- å› ç‰¹ç½‘ä¸Šæœ‰13ä¸ªæ ¹åŸŸåæœåŠ¡å™¨ï¼Œå°½ç®¡æˆ‘ä»¬å°†è¿™13ä¸ªæ ¹åŸŸåæœåŠ¡å™¨ä¸­çš„æ¯ä¸ªéƒ½è§†ä¸ºå•ä¸ªæœåŠ¡å™¨ï¼Œä½†æ¯ä¸ªâ€œæœåŠ¡å™¨â€å®é™…ä¸Šæ˜¯å†—ä½™æœåŠ¡å™¨çš„é›†ç¾¤ï¼Œä»¥æä¾›å®‰å…¨æ€§å’Œå¯é æ€§ã€‚
- æ ¹åŸŸåæœåŠ¡å™¨ç”¨æ¥ç®¡è¾–é¡¶çº§åŸŸ(å¦‚.com),é€šå¸¸å®ƒå¹¶ä¸ç›´æ¥æŠŠå¾…æŸ¥è¯¢çš„åŸŸåç›´æ¥è½¬æ¢æˆIIPåœ°å€ï¼Œè€Œæ˜¯å‘Šè¯‰æœ¬åœ°åŸŸåæœåŠ¡å™¨**ä¸‹ä¸€æ­¥åº”å½“æ‰¾å“ªä¸ªé¡¶çº§åŸŸåæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢**ã€‚

#### æ ¹åŸŸåæœåŠ¡å™¨å…±æœ‰13 å¥—è£…ç½®

- <u>æ ¹åŸŸåæœåŠ¡å™¨å…±æœ‰**13** å¥—è£…ç½®ï¼Œ**ä¸æ˜¯13 ä¸ªæœºå™¨**ã€‚</u>
- è¿™äº›æ ¹åŸŸåæœåŠ¡å™¨ç›¸åº”çš„åŸŸååˆ†åˆ«æ˜¯ï¼š
  - a.rootservers.net
  - b.rootservers.net
  - â€¦
  - m.rootservers.net
- åˆ°2016å¹´2æœˆï¼Œå…¨ä¸–ç•Œå·²ç»åœ¨588 ä¸ªåœ°ç‚¹å®‰è£…äº†æ ¹åŸŸåæœåŠ¡å™¨ï¼Œä½¿ä¸–ç•Œä¸Šå¤§éƒ¨åˆ†DNS åŸŸåæœåŠ¡å™¨éƒ½èƒ½å°±è¿‘æ‰¾åˆ°ä¸€ä¸ªæ ¹åŸŸåæœåŠ¡å™¨ã€‚

#### ping rootservers.net

- ```bash
  PS C:\Users> ping a.rootservers.net
  
  Pinging a.rootservers.net [35.186.238.101] with 32 bytes of data:
  Reply from 35.186.238.101: bytes=32 time=98ms TTL=49
  Reply from 35.186.238.101: bytes=32 time=95ms TTL=49
  Reply from 35.186.238.101: bytes=32 time=101ms TTL=49
  Reply from 35.186.238.101: bytes=32 time=112ms TTL=49
  
  Ping statistics for 35.186.238.101:
      Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
  Approximate round trip times in milli-seconds:
      Minimum = 95ms, Maximum = 112ms, Average = 101ms
  ```

  

### 2.é¡¶çº§åŸŸåæœåŠ¡å™¨

- è¿™äº›åŸŸåæœåŠ¡å™¨è´Ÿè´£ç®¡ç†**åœ¨è¯¥é¡¶çº§åŸŸåæœåŠ¡å™¨æ³¨å†Œçš„**æ‰€æœ‰**äºŒçº§åŸŸå**ã€‚
- æ”¶åˆ°DNSæŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œå°±ç»™å‡ºç›¸åº”çš„å›ç­”(å¯èƒ½æ˜¯æœ€åçš„ç»“æœï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸‹ä¸€æ­¥åº”å½“æŸ¥æ‰¾çš„åŸŸåæœåŠ¡å™¨çš„IPåœ°å€)ã€‚

### 3.æŠ•æƒåŸŸåæœåŠ¡å™¨ï¼ˆæƒé™åŸŸåæœåŠ¡å™¨ï¼‰

- æ¯å°ä¸»æœºéƒ½å¿…é¡»åœ¨æˆæƒåŸŸåæœåŠ¡å™¨å¤„ç™»è®°ã€‚ä¸ºäº†æ›´åŠ å¯é åœ°å·¥ä½œï¼Œä¸€å°ä¸»æœºæœ€å¥½è‡³å°‘æœ‰ä¸¤ä¸ªæˆæƒåŸŸåæœåŠ¡å™¨ã€‚å®é™…ä¸Šï¼Œè®¸**å¤šåŸŸåæœåŠ¡å™¨**éƒ½åŒæ—¶å……å½“**æœ¬åœ°åŸŸåæœåŠ¡å™¨å’ŒæˆæƒåŸŸåæœåŠ¡å™¨**ã€‚
- æˆæƒåŸŸåæœåŠ¡å™¨æ€»èƒ½å°†å…¶ç®¡è¾–çš„ä¸»æœºåè½¬æ¢ä¸ºè¯¥ä¸»æœºçš„IPåœ°å€ã€‚

### 4.æœ¬åœ°åŸŸåæœåŠ¡å™¨

- æœ¬åœ°åŸŸåæœåŠ¡å™¨å¯¹åŸŸåç³»ç»Ÿéå¸¸é‡è¦ã€‚æ¯ä¸ªå› ç‰¹ç½‘æœåŠ¡æä¾›è€…(SP),æˆ–ä¸€æ‰€å¤§å­¦ï¼Œç”šè‡³ä¸€æ‰€å¤§å­¦ä¸­çš„å„ä¸ªç³»ï¼Œéƒ½å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªæœ¬åœ°åŸŸåæœåŠ¡å™¨ã€‚
- å½“ä¸€å°ä¸»æœºå‘å‡ºDNSæŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œè¿™ä¸ªæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡å°±å‘é€ç»™è¯¥ä¸»æœºçš„æœ¬åœ°åŸŸåæœåŠ¡å™¨ã€‚
- äº‹å®ä¸Šï¼Œæˆ‘ä»¬åœ¨Windowsç³»ç»Ÿä¸­é…ç½®â€œæœ¬åœ°è¿æ¥â€æ—¶ï¼Œå°±éœ€è¦å¡«å†™DNSåœ°å€ï¼Œè¿™ä¸ªåœ°å€å°±æ˜¯æœ¬åœ°DNSï¼ˆåŸŸåæœåŠ¡å™¨ï¼‰çš„åœ°å€ã€‚

## åŸŸåè§£æè¿‡ç¨‹

### é€’å½’æŸ¥è¯¢

- ä½¿ç”¨çš„è¾ƒå°‘

- ```mermaid
  flowchart LR
  
  	client[m.xyz.comæƒ³è¦æŸ¥è¯¢y.abc.comçš„åœ°å€]--1--> local[dns.xyz.com]--->root --> top[dns.com] -->right[dns.abc.com]
  	right-->top-->root-->local--8-->client
  ```

  

### è¿­ä»£æŸ¥è¯¢

- é€’å½’å’Œè¿­ä»£ç›¸ç»“åˆæŸ¥è¯¢

```mermaid
flowchart BT

	client[m.xyz.comæƒ³è¦æŸ¥è¯¢y.abc.comçš„åœ°å€]--1--> local[dns.xyz.com]--->root[dns.] & top[dns.com] & right[dns.abc.com]
	root & top & right--->local--8-->client
```

### ä¾‹

- [2016ç»Ÿè€ƒçœŸ]

  - å‡è®¾æ‰€æœ‰åŸŸåæœåŠ¡å™¨å‡é‡‡ç”¨è¿­ä»£æŸ¥è¯¢æ–¹å¼è¿›è¡ŒåŸŸåè§£æã€‚
  - å½“ä¸»æœºè®¿é—®è§„èŒƒåŸŸåä¸ºwww.abc.Xyz.comçš„ç½‘ç«™æ—¶ï¼Œ**æœ¬åœ°åŸŸåæœåŠ¡å™¨**åœ¨å®Œæˆè¯¥åŸŸåè§£æçš„è¿‡ç¨‹ä¸­ï¼Œ
  - å¯èƒ½**å‘å‡ºDNSæŸ¥è¯¢**çš„æœ€å°‘å’Œæœ€å¤šæ¬¡æ•°åˆ†åˆ«æ˜¯ï¼ˆCï¼‰ã€‚
    - A.0,3
      B.1,3
      C.0,4
      D.1,4

- æœ€å°‘æƒ…å†µä¸‹ï¼š å½“æœ¬æœº DNSé«˜é€Ÿç¼“å­˜ä¸­å­˜æœ‰è¯¥åŸŸåçš„DNSä¿¡æ¯æ—¶ï¼Œåˆ™ä¸ éœ€è¦æŸ¥è¯¢ä»»ä½•åŸŸåæœåŠ¡å™¨ï¼Œè¿™æ ·æœ€å°‘å‘å‡º0æ¬¡DNSæŸ¥è¯¢ã€‚

- æœ€å¤šæƒ…å†µä¸‹ï¼šå› ä¸ºå‡é‡‡ç”¨è¿­ä»£æŸ¥è¯¢çš„æ–¹å¼ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨ éœ€è¦ä¾æ¬¡è¿­ä»£åœ°å‘

  - æ ¹åŸŸåæœåŠ¡å™¨(dns.) ã€é¡¶çº§åŸŸåæœåŠ¡å™¨ (dns.com.)ã€äºŒçº§æœåŠ¡å™¨(dns.xyz.com) ,ä¸‰çº§(dns.abc.xyz.com)å’Œå‘å‡ºDNSæŸ¥è¯¢ è¯·æ±‚ï¼Œå› æ­¤ æœ€å¤šå‘å‡º4æ¬¡DNSæŸ¥è¯¢ã€‚

  - | æ¬¡æ•°                         | 1æ¬¡     | 2æ¬¡         | 3æ¬¡             | 4æ¬¡             |
    | ---------------------------- | ------- | ----------- | --------------- | --------------- |
    | æŸ¥è¯¢çš„æœåŠ¡å™¨                 | dns.    | dns.com     | dns.xyz.com     | dns.abc.xyz.com |
    | æŸ¥è¯¢ç»“æœ(å„çº§æœåŠ¡å™¨çš„IPåœ°å€) | dns.com | dns.xyz.com | dns.abc.xyz.com | www.abc.xyz.com |

  - å¯è§,ç¬¬å››æ¬¡æŸ¥è¯¢å,å¾—åˆ°ç›®æ ‡åŸŸåwww.abc.xyz.com çš„IPåœ°å€

### ä¾‹

[2020ç»Ÿè€ƒçœŸé¢˜]

-  ç½‘ç»œä¸­çš„æœ¬åœ°åŸŸåæœåŠ¡å™¨åªæä¾›é€’å½’æŸ¥è¯¢æœåŠ¡ï¼Œå…¶ä»–åŸŸåæœåŠ¡å™¨å‡åªæä¾›è¿­ä»£æŸ¥è¯¢æœåŠ¡ï¼›
- **å±€åŸŸç½‘å†…ä¸»æœº**è®¿é—®Internetä¸Šå„æœåŠ¡å™¨çš„å¾€è¿”æ—¶é—´(RTT)å‡ä¸ºI0ms,
- **å¿½ç•¥å…¶ä»–å„ç§æ—¶å»¶**ã€‚
- è‹¥ä¸»æœºHé€šè¿‡è¶…é“¾æ¥S=<u>http:/www,abc.com/index,html</u>è¯·æ±‚æµè§ˆçº¯æ–‡æœ¬Webé¡µindex.html,
- åˆ™ä»å•å‡»è¶…é“¾æ¥å¼€å§‹åˆ°æµè§ˆå™¨æ¥æ”¶åˆ°index.htmlé¡µé¢ä¸ºæ­¢ï¼Œæ‰€éœ€çš„æœ€çŸ­æ—¶é—´ä¸æœ€é•¿æ—¶é—´åˆ†åˆ«æ˜¯?
- åˆ†æ:
  - æœ€å¥½æƒ…å†µä¸‹,æœ¬åœ°å±€åŸŸç½‘å†…çš„æœ¬åœ°åŸŸåæœåŠ¡å™¨çš„é«˜é€Ÿç¼“å­˜ä¸­æœ‰è¶…é“¾æ¥Sæ‰€åœ¨ä¸»æœºçš„IPåœ°å€æ˜ å°„
  - ç”±äºå¿½ç•¥å…¶ä»–å„ç§å»¶æ—¶,æ‰€è®¤ä¸ºä»åŸŸåæ˜ å°„åˆ°IPåœ°å€çš„è€—æ—¶ä¸º0
  - å¾—åˆ°éœ€è¦çš„IPåœ°å€å,è®¿é—®httpèµ„æº,é¦–å…ˆå»ºç«‹TCPé“¾æ¥,éœ€è¦è€—è´¹ä¸€ä¸ªå¾€è¿”æ—¶é—´RTT(ç¬¬ä¸€æ¬¡æ¡æ‰‹å’Œç¬¬äºŒæ¬¡æ¡æ‰‹)
  - æ•°æ®ä¼ è¾“(åŠ è½½èµ„æºä¹Ÿæ¶ˆè€—ä¸€ä¸ªå¾€è¿”å»¶æ—¶RTT
  - æ‰€ä»¥è‡³å°‘éœ€è¦2ä¸ªRTTå»¶æ—¶æ‰èƒ½å¤ŸåŠ è½½åˆ°èµ„æº
  - æœ€åæƒ…å†µä¸‹,éœ€è¦ä¸€æ¬¡æŸ¥è¯¢
    - dns.
    - dns.com.
    - dns.abc.com
      - è¿™ä¸€æ¬¡æŸ¥è¯¢å¾—åˆ°äº†www.abc.comçš„IPåœ°å€
    - ä¸‰æ¬¡æŸ¥è¯¢è€—è´¹ä¸‰ä¸ªRTT
      - (ä¸‰æ¬¡æŸ¥è¯¢éƒ½æ˜¯UDPåŸºç¡€ä¸Š,æ˜¯æ— è¿æ¥çš„)
    - å†ç®—ä¸Šèµ„æºåŠ è½½çš„éœ€è¦çš„2ä¸ªRTT,å…±5ä¸ªRTT
  - æ‰€ä»¥æœ€çŸ­æ—¶é—´å’Œæœ€é•¿æ—¶é—´åˆ†åˆ«ä¸º20mså’Œ50ms

## HTTPåè®®

- [Hypertext Transfer Protocol - Wikipedia](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)

- HTTP åè®®å’Œ TCP/IP åè®®æ—å†…çš„å…¶ä»–ä¼—å¤šçš„åè®®ç›¸åŒï¼Œç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ã€‚

- è¯·æ±‚è®¿é—®æ–‡æœ¬æˆ–å›¾åƒç­‰èµ„æºçš„ä¸€ç«¯ç§°ä¸ºå®¢æˆ·ç«¯ï¼Œè€Œæä¾›èµ„æºå“åº”çš„ä¸€ç«¯ç§°ä¸ºæœåŠ¡å™¨ç«¯ã€‚

- åœ¨ä¸¤å°è®¡ç®—æœºä¹‹é—´ä½¿ç”¨ HTTP åè®®é€šä¿¡æ—¶ï¼Œåœ¨ä¸€æ¡é€šä¿¡çº¿è·¯ä¸Šå¿…å®šæœ‰ä¸€ç«¯æ˜¯å®¢æˆ·ç«¯ï¼Œå¦ä¸€ç«¯åˆ™æ˜¯æœåŠ¡å™¨ç«¯ã€‚


- æœ‰æ—¶å€™ï¼ŒæŒ‰å®é™…æƒ…å†µï¼Œä¸¤å°è®¡ç®—æœºä½œä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„è§’è‰²æœ‰å¯èƒ½ä¼šäº’æ¢ã€‚
- ä½†å°±ä»…ä»ä¸€æ¡é€šä¿¡è·¯çº¿æ¥è¯´ï¼ŒæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯çš„è§’è‰²æ˜¯ç¡®å®šçš„ï¼Œè€Œç”¨ HTTP åè®®èƒ½å¤Ÿæ˜ç¡®åŒºåˆ†å“ªç«¯æ˜¯å®¢æˆ·ç«¯ï¼Œå“ªç«¯æ˜¯æœåŠ¡å™¨ç«¯ã€‚

HTTP åè®®è§„å®šï¼Œè¯·æ±‚ä»å®¢æˆ·ç«¯å‘å‡ºï¼Œæœ€åæœåŠ¡å™¨ç«¯å“åº”è¯¥è¯·æ±‚å¹¶è¿”å›ã€‚

- è‚¯å®šæ˜¯**å…ˆä»å®¢æˆ·ç«¯**å¼€å§‹**å»ºç«‹é€šä¿¡**çš„ï¼ŒæœåŠ¡å™¨ç«¯<u>åœ¨æ²¡æœ‰æ¥æ”¶åˆ°è¯·æ±‚ä¹‹å‰ä¸ä¼šå‘é€å“åº”</u>ã€‚

### HTTPç‰¹ç‚¹

- HTTPä½¿ç”¨TCPä½œä¸ºè¿è¾“å±‚åè®®ï¼Œä¿è¯äº†æ•°æ®çš„å¯é ä¼ è¾“ã€‚
- HTTPä¸å¿…è€ƒè™‘æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«ä¸¢å¼ƒååˆæ€æ ·è¢«é‡ä¼ ã€‚
  - ä½†æ˜¯ï¼ŒHTTPæœ¬èº«æ˜¯æ— è¿æ¥çš„ï¼ˆåŠ¡å¿…æ³¨æ„ï¼‰ã€‚
  - ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶HTTPä½¿ç”¨äº†TCPè¿æ¥ï¼Œä½†é€šä¿¡çš„åŒæ–¹åœ¨äº¤æ¢HTTPæŠ¥æ–‡ä¹‹å‰ä¸éœ€è¦å…ˆå»ºç«‹HTTPè¿æ¥ã€‚

### httpçš„æ— çŠ¶æ€

- ä½¿ç”¨ HTTP åè®®ï¼Œæ¯å½“æœ‰æ–°çš„è¯·æ±‚å‘é€æ—¶ï¼Œå°±ä¼šæœ‰å¯¹åº”çš„æ–°å“åº”äº§ç”Ÿã€‚
  - ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€ä¸ªå®¢æˆ·ç¬¬äºŒæ¬¡è®¿é—®åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„é¡µé¢æ—¶ï¼ŒæœåŠ¡å™¨çš„å“åº”ä¸ç¬¬ä¸€æ¬¡è¢«è®¿é—®æ—¶çš„ç›¸åŒã€‚
  - å› ä¸ºæœåŠ¡å™¨å¹¶ä¸è®°å¾—æ›¾ç»è®¿é—®è¿‡çš„è¿™ä¸ªå®¢æˆ·ï¼Œä¹Ÿä¸è®°å¾—ä¸ºè¯¥å®¢æˆ·æ›¾ç»æœåŠ¡è¿‡å¤šå°‘æ¬¡ã€‚
  - åè®®æœ¬èº«å¹¶**ä¸ä¿ç•™ä¹‹å‰ä¸€åˆ‡çš„è¯·æ±‚æˆ–å“åº”æŠ¥æ–‡çš„ä¿¡æ¯**ã€‚
  - è¿™æ˜¯ä¸ºäº†æ›´å¿«åœ°å¤„ç†å¤§é‡äº‹åŠ¡ï¼Œç¡®ä¿åè®®çš„å¯ä¼¸ç¼©æ€§ï¼Œè€Œç‰¹æ„æŠŠ HTTP åè®®è®¾è®¡æˆå¦‚æ­¤ç®€å•çš„ã€‚
- å¯æ˜¯ï¼Œéšç€ Web çš„ä¸æ–­å‘å±•ï¼Œå› **æ— çŠ¶æ€è€Œå¯¼è‡´ä¸šåŠ¡å¤„ç†å˜å¾—æ£˜æ‰‹çš„æƒ…å†µå¢å¤šäº†**ã€‚
  - æ¯”å¦‚ï¼Œç”¨æˆ·ç™»å½•åˆ°ä¸€å®¶è´­ç‰©ç½‘ç«™ï¼Œå³ä½¿ä»–è·³è½¬åˆ°è¯¥ç«™çš„å…¶ä»–é¡µé¢åï¼Œä¹Ÿéœ€è¦èƒ½ç»§ç»­ä¿æŒç™»å½•çŠ¶æ€ã€‚
  - é’ˆå¯¹è¿™ä¸ªå®ä¾‹ï¼Œç½‘ç«™ä¸ºäº†èƒ½å¤ŸæŒæ¡æ˜¯è°é€å‡ºçš„è¯·æ±‚ï¼Œéœ€è¦ä¿å­˜ç”¨æˆ·çš„çŠ¶æ€ã€‚

## Cookie



- HTTP/1.1 è™½ç„¶æ˜¯æ— çŠ¶æ€åè®®ï¼Œä½†ä¸ºäº†å®ç°æœŸæœ›çš„ä¿æŒçŠ¶æ€åŠŸèƒ½ï¼Œäºæ˜¯å¼•å…¥äº† Cookie æŠ€æœ¯ã€‚
  - æœ‰äº† Cookie å†ç”¨ HTTP åè®®é€šä¿¡ï¼Œå°±å¯ä»¥ç®¡ç†çŠ¶æ€äº†ã€‚

- HTTPçš„æ— çŠ¶æ€ç‰¹æ€§ç®€åŒ–äº†æœåŠ¡å™¨çš„è®¾è®¡ï¼Œä½¿æœåŠ¡å™¨æ›´å®¹æ˜“æ”¯æŒå¤§é‡å¹¶å‘çš„HTTPè¯·æ±‚ã€‚
  - åœ¨å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸ä½¿ç”¨CookåŠ æ•°æ®åº“çš„æ–¹å¼æ¥è·Ÿè¸ªç”¨æˆ·çš„æ´»åŠ¨ 

### Cookieçš„å·¥ä½œåŸç†ï¼š

- ä¿ç•™æ— çŠ¶æ€åè®®è¿™ä¸ªç‰¹å¾çš„åŒæ—¶åˆè¦è§£å†³ç±»ä¼¼çš„çŸ›ç›¾é—®é¢˜ï¼Œäºæ˜¯å¼•å…¥äº† Cookie æŠ€æœ¯ã€‚
- å½“ç”¨æˆ·æµè§ˆæŸä¸ªä½¿ç”¨Cookieçš„ç½‘ç«™æ—¶ï¼Œè¯¥ç½‘ç«™æœåŠ¡å™¨å°±**ä¸ºç”¨æˆ·äº§ç”Ÿä¸€ä¸ªå”¯ä¸€çš„è¯†åˆ«ç **ï¼Œå¦‚â€œ123456â€ï¼Œ
- æ¥ç€åœ¨ç»™ç”¨æˆ·çš„**å“åº”æŠ¥æ–‡**ä¸­æ·»åŠ ä¸€ä¸ªSet-cookieçš„é¦–éƒ¨è¡Œ:â€œSet cookie:123456â€ã€‚

- ç”¨æˆ·æ”¶åˆ°å“åº”åï¼Œå°±åœ¨å®ƒç®¡ç†çš„ç‰¹å®š**Cookieæ–‡ä»¶**ä¸­æ·»åŠ è¿™ä¸ª**æœåŠ¡å™¨çš„ä¸»æœºåå’ŒCookè¯†åˆ«ç **ï¼Œ
- å½“ç”¨æˆ·ç»§ç»­æµè§ˆè¿™ä¸ªç½‘ç«™æ—¶ï¼Œä¼šå–å‡ºè¿™ä¸ªç½‘ç«™çš„è¯†åˆ«ç ï¼Œå¹¶**æ”¾å…¥è¯·æ±‚æŠ¥æ–‡çš„Cookieé¦–éƒ¨è¡Œ**â€œCookie:123456â€ã€‚
  - æœåŠ¡å™¨**æ ¹æ®è¯·æ±‚æŠ¥æ–‡ä¸­çš„Cookieè¯†åˆ«ç **å°±èƒ½ä»æ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°è¯¥ç”¨æˆ·çš„æ´»åŠ¨è®°å½•ï¼Œè¿›è€Œæ‰§è¡Œä¸€äº›ä¸ªæ€§åŒ–çš„å·¥ä½œï¼Œå¦‚æ ¹æ®ç”¨æˆ·çš„å†å²æµè§ˆè®°å½•å‘å…¶æ¨èæ–°äº§å“ç­‰ã€‚

### HTTPçš„è¿æ¥ç±»å‹

- HTTPæ—¢å¯ä»¥ä½¿ç”¨éæŒä¹…è¿æ¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æŒä¹…è¿æ¥(HTTP/1.1æ”¯æŒ)ã€‚

#### éæŒä¹…è¿æ¥

- æ¯ä¸ªç½‘é¡µå…ƒç´ å¯¹è±¡(å¦‚PEGå›¾å½¢ã€Flshç­‰)çš„ä¼ è¾“éƒ½éœ€è¦å•ç‹¬å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼Œ 

  - ç¬¬ä¸‰æ¬¡æ¡æ‰‹çš„æŠ¥æ–‡æ®µä¸­**æå¸¦äº†å®¢æˆ·å¯¹ä¸‡ç»´ç½‘æ–‡æ¡£çš„è¯·æ±‚**

- è¯·æ±‚ä¸€ä¸ªä¸‡ç»´ç½‘æ–‡æ¡£æ‰€éœ€çš„æ—¶é—´æ˜¯

  - **è¯¥æ–‡æ¡£çš„ä¼ è¾“æ—¶é—´**$T_s$
    - ä¸æ–‡æ¡£å¤§å°æˆæ­£æ¯”

  - **ä¸¤å€å¾€è¿”æ—¶é—´RTT**(ä¸€ä¸ªRTTç”¨äºTCPè¿æ¥ï¼Œå¦ä¸€ä¸ªRTTç”¨äºè¯·æ±‚å’Œæ¥æ”¶æ–‡æ¡£ï¼‰ã€‚
    - æ¯ä¸ªå¯¹è±¡å¼•ç”¨éƒ½å¯¼è‡´2Ã—RTTçš„å¼€é”€ï¼Œæ­¤å¤–æ¯æ¬¡å»ºç«‹æ–°çš„TCPè¿æ¥éƒ½è¦åˆ†é…ç¼“å­˜å’Œå˜é‡ï¼Œä½¿ä¸‡ç»´ç½‘æœåŠ¡å™¨çš„è´Ÿæ‹…å¾ˆé‡ã€‚

#### æŒä¹…è¿æ¥

- ä¸ºè§£å†³ä¸Šè¿° TCP è¿æ¥çš„é—®é¢˜ï¼ŒHTTP/1.1 å‡ºäº†æŒä¹…è¿æ¥ï¼ˆHTTP Persistent Connectionsï¼Œä¹Ÿç§°ä¸º **HTTP keep-alive** æˆ–HTTP connection reuseï¼‰çš„æ–¹æ³•ã€‚
- **æŒä¹…è¿æ¥**:ä¸‡ç»´ç½‘æœåŠ¡å™¨åœ¨å‘é€å“åº”åä»ç„¶ä¿æŒè¿™æ¡è¿æ¥ï¼Œä½¿åŒä¸€ä¸ªå®¢æˆ·ï¼ˆæµè§ˆå™¨ï¼‰å’Œè¯¥æœåŠ¡å™¨å¯ä»¥ç»§ç»­åœ¨è¿™æ¡è¿æ¥ä¸Šä¼ é€åç»­çš„HTTPè¯·æ±‚å’Œå“åº”æŠ¥æ–‡
- æŒä¹…è¿æ¥çš„ç‰¹ç‚¹æ˜¯ï¼Œåªè¦ä»»æ„ä¸€ç«¯æ²¡æœ‰æ˜ç¡®æå‡ºæ–­å¼€è¿æ¥ï¼Œåˆ™ä¿æŒ TCP è¿æ¥çŠ¶æ€ã€‚
- æŒä¹…è¿æ¥çš„å¥½å¤„åœ¨äºå‡å°‘äº† TCP è¿æ¥çš„é‡å¤å»ºç«‹å’Œæ–­å¼€æ‰€é€ æˆçš„é¢å¤–å¼€é”€ï¼Œå‡è½»äº†æœåŠ¡å™¨ç«¯çš„è´Ÿè½½ã€‚
- å¦å¤–ï¼Œå‡å°‘å¼€é”€çš„é‚£éƒ¨åˆ†æ—¶é—´ï¼Œä½¿HTTP è¯·æ±‚å’Œå“åº”èƒ½å¤Ÿæ›´æ—©åœ°ç»“æŸï¼Œè¿™æ · Web é¡µé¢çš„æ˜¾ç¤ºé€Ÿåº¦ä¹Ÿå°±ç›¸åº”æé«˜äº†ã€‚
- æŒä¹…è¿æ¥åˆåˆ†ä¸ºéæµæ°´çº¿å’Œæµæ°´çº¿ä¸¤ç§æ–¹å¼ã€‚
  - éæµæ°´çº¿æ–¹å¼
    - **å®¢æˆ·**åœ¨**æ”¶åˆ°å‰ä¸€ä¸ªå“åº”åæ‰èƒ½å‘å‡ºä¸‹ä¸€ä¸ªè¯·æ±‚**ï¼ŒæœåŠ¡å™¨å‘é€å®Œä¸€ä¸ªå¯¹è±¡åï¼Œå…¶TCPè¿æ¥å°±å¤„äºç©ºé—²çŠ¶æ€ï¼Œæµªè´¹äº†æœåŠ¡å™¨èµ„æºã€‚
  - æµæ°´çš„æŒä¹…è¿æ¥
    - HTTP/1.1çš„é»˜è®¤æ–¹å¼æ˜¯ä½¿ç”¨**æµæ°´çº¿çš„æŒä¹…è¿æ¥**ï¼Œ
    - è¿™ç§æƒ…å†µä¸‹ï¼Œ**å®¢æˆ·**æ¯é‡åˆ°ä¸€ä¸ªå¯¹è±¡å¼•ç”¨å°±ç«‹å³å‘å‡ºä¸€ä¸ªè¯·æ±‚ï¼Œå› è€Œå®¢æˆ·å¯ä»¥**é€ä¸ªåœ°è¿ç»­å‘å‡ºå¯¹å„ä¸ªå¼•ç”¨å¯¹è±¡çš„è¯·æ±‚ã€‚**
    - å¦‚æœæ‰€æœ‰çš„è¯·æ±‚å’Œå“åº”éƒ½æ˜¯**è¿ç»­å‘é€**çš„ï¼Œé‚£ä¹ˆ**æ‰€æœ‰å¼•ç”¨çš„å¯¹è±¡å…±è®¡**ç»å†1ä¸ªRTTå»¶è¿Ÿ
      - è€Œä¸æ˜¯åƒéæµæ°´çº¿æ–¹å¼é‚£æ ·ï¼Œ**æ¯ä¸ªå¼•ç”¨**éƒ½å¿…é¡»æœ‰1ä¸ªRTTå»¶è¿Ÿã€‚
    - è¿™ç§æ–¹å¼å‡å°‘äº†TCPè¿æ¥ä¸­çš„ç©ºé—²æ—¶é—´ï¼Œæé«˜äº†æ•ˆç‡ã€‚



### httpè¯·æ±‚/å“åº”å®ä¾‹

![image-20220529115056997](https://s2.loli.net/2022/05/29/DVMrounXhy3stlx.png)

#### HTTP/1.1 example of request / response transaction 

- Below is a sample HTTP transaction between an HTTP/1.1 client and an HTTP/1.1 server running on [www.example.com](https://en.wikipedia.org/wiki/Example.com), port80

##### Client request

```
GET / HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8
Accept-Language: en-GB,en;q=0.5
Accept-Encoding: gzip, deflate, br
Connection: keep-alive
```

- A client request (consisting in this case of the request line and a few headers that can be reduced to only the `"Host: hostname"` header) is followed by a blank line, so that the request ends with a double end of line, each in the form of a [carriage return](https://en.wikipedia.org/wiki/Carriage_return) followed by a [line feed](https://en.wikipedia.org/wiki/Line_feed). The `"Host: hostname"` header value distinguishes between various [DNS](https://en.wikipedia.org/wiki/Domain_Name_System) names sharing a single [IP address](https://en.wikipedia.org/wiki/IP_address), allowing name-based [virtual hosting](https://en.wikipedia.org/wiki/Virtual_hosting). While optional in HTTP/1.0, it is mandatory in HTTP/1.1. (A "/" (slash) will usually fetch a [/index.html](https://en.wikipedia.org/wiki/Webserver_directory_index) file if there is one.)


##### Server response

```http
HTTP/1.1 200 OK
Date: Mon, 23 May 2005 22:38:34 GMT
Content-Type: text/html; charset=UTF-8
Content-Length: 155
Last-Modified: Wed, 08 Jan 2003 23:11:55 GMT
Server: Apache/1.3.3.7 (Unix) (Red-Hat/Linux)
ETag: "3f80f-1b6-3e1cb03b"
Accept-Ranges: bytes
Connection: close

<html>
  <head>
    <title>An Example Page</title>
  </head>
  <body>
    <p>Hello World, this is a very simple HTML document.</p>
  </body>
</html>
```

- The [ETag](https://en.wikipedia.org/wiki/HTTP_ETag) (entity tag) header field is used to determine if a cached version of the requested resource is identical to the current version of the resource on the server. `"Content-Type"` specifies the [Internet media type](https://en.wikipedia.org/wiki/Internet_media_type) of the data conveyed by the HTTP message, while `"Content-Length"` indicates its length in bytes. The HTTP/1.1 [webserver](https://en.wikipedia.org/wiki/Webserver) publishes its ability to respond to requests for certain byte ranges of the document by setting the field `"Accept-Ranges: bytes"`. This is useful, if the client needs to have only certain portions[[61\]](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#cite_note-67) of a resource sent by the server, which is called [byte serving](https://en.wikipedia.org/wiki/Byte_serving). When `"Connection: close"` is sent, it means that the [web server](https://en.wikipedia.org/wiki/Web_server) will close the [TCP](https://en.wikipedia.org/wiki/Transmission_Control_Protocol) connection immediately after the end of the transfer of this response.[[21\]](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#cite_note-rfc9112-9.1-21)

- Most of the header lines are optional but some are mandatory. When header `"Content-Length: number"` is missing in a response with an entity body then this should be considered an error in HTTP/1.0 but it may not be an error in HTTP/1.1 if header `"Transfer-Encoding: chunked"` is present. Chunked transfer encoding uses a chunk size of 0 to mark the end of the content. Some old implementations of HTTP/1.0 omitted the header `"Content-Length"` when the length of the body entity was not known at the beginning of the response and so the transfer of data to client continued until server closed the socket.

- A `"Content-Encoding: gzip"` can be used to inform the client that the body entity part of the transmitted data is compressed by gzip algorithm.

## HTTPæŠ¥æ–‡æ€»ä½“ç»“æ„

- HTTPæ˜¯é¢å‘æ–‡æœ¬çš„(Text-Oriented)
- æŠ¥æ–‡ä¸­çš„æ¯ä¸ªå­—æ®µéƒ½æ˜¯ä¸€äº›ASCIç ä¸²ï¼Œå¹¶ä¸”æ¯ä¸ªå­—æ®µçš„é•¿åº¦éƒ½æ˜¯ä¸ç¡®å®šçš„ã€‚æœ‰ä¸¤ç±»HTTPæŠ¥æ–‡ï¼š
  - è¯·æ±‚æŠ¥æ–‡ï¼šä»å®¢æˆ·å‘æœåŠ¡å™¨å‘é€çš„è¯·æ±‚æŠ¥æ–‡
  - å“åº”æŠ¥æ–‡ï¼šä»æœåŠ¡å™¨åˆ°å®¢æˆ·çš„å›ç­”
- HTTPè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡éƒ½ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆ
  -  è¿™ä¸¤ç§æŠ¥æ–‡æ ¼å¼çš„åŒºåˆ«å°±æ˜¯å¼€å§‹è¡Œä¸åŒã€‚

### å¼€å§‹è¡Œï¼š

- ç”¨äºåŒºåˆ†æ˜¯è¯·æ±‚æŠ¥æ–‡è¿˜æ˜¯å“åº”æŠ¥æ–‡ã€‚
- åœ¨**è¯·æ±‚æŠ¥æ–‡**ä¸­çš„å¼€å§‹è¡Œç§°ä¸º**è¯·æ±‚è¡Œ**ï¼Œ
- åœ¨**å“åº”æŠ¥æ–‡**ä¸­çš„å¼€å§‹è¡Œç§°ä¸º**çŠ¶æ€è¡Œ**ã€‚
- å¼€å§‹è¡Œ
  - å«æœ‰çš„ä¸‰ä¸ªå­—æ®µä¹‹é—´éƒ½ä»¥ç©ºæ ¼åˆ†éš”ï¼Œæœ€åçš„â€œCRâ€å’Œâ€œLFâ€åˆ†åˆ«ä»£è¡¨â€œå›è½¦â€å’Œâ€œæ¢è¡Œâ€ã€‚
  - **è¯·æ±‚æŠ¥æ–‡Requset**çš„â€œè¯·æ±‚è¡Œâ€æœ‰ä¸‰ä¸ªå†…å®¹ï¼š
    - æ–¹æ³•Method
      - â€œæ–¹æ³•â€æ˜¯å¯¹æ‰€è¯·æ±‚å¯¹è±¡è¿›è¡Œçš„æ“ä½œï¼Œè¿™äº›æ–¹æ³•å®é™…ä¸Šä¹Ÿå°±æ˜¯ä¸€äº›å‘½ä»¤ã€‚
    - è¯·æ±‚èµ„æºçš„URL
    - HTTPçš„ç‰ˆæœ¬Version

### é¦–éƒ¨è¡Œï¼š

- ç”¨æ¥è¯´æ˜æµè§ˆå™¨ã€æœåŠ¡å™¨æˆ–æŠ¥æ–‡ä¸»ä½“çš„ä¸€äº›ä¿¡æ¯ã€‚
- é¦–éƒ¨å¯ä»¥æœ‰å‡ è¡Œï¼Œä½†ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ã€‚
- åœ¨æ¯ä¸ªé¦–éƒ¨è¡Œä¸­éƒ½æœ‰é¦–éƒ¨å­—æ®µåå’Œå®ƒçš„å€¼ï¼Œæ¯ä¸€è¡Œåœ¨ç»“æŸçš„åœ°æ–¹éƒ½è¦æœ‰â€œå›è½¦â€å’Œâ€œæ¢è¡Œâ€ã€‚
- æ•´ä¸ªé¦–éƒ¨è¡Œç»“æŸæ—¶ï¼Œè¿˜æœ‰ä¸€ç©ºè¡Œå°†é¦–éƒ¨è¡Œå’Œåé¢çš„å®ä½“ä¸»ä½“åˆ†å¼€ã€‚

### å®ä½“ä¸»ä½“ï¼š

- åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­ä¸€èˆ¬ä¸ç”¨è¿™ä¸ªå­—æ®µï¼Œè€Œåœ¨å“åº”æŠ¥æ–‡ä¸­ä¹Ÿå¯èƒ½æ²¡æœ‰è¿™ä¸ªå­—æ®µã€‚
- å¯ä»¥ä½¿ç”¨Wiresharkæ•è·çš„HTTPè¯·æ±‚æŠ¥æ–‡

## HTTPä¸¤ç±»æŠ¥æ–‡å…·ä½“ç»“æ„å’Œå®ä¾‹

### è¯·æ±‚æŠ¥æ–‡ç»“æ„ğŸˆ

- è¯·æ±‚æŠ¥æ–‡[Hypertext Transfer Protocol HTTP/1.1.request message - Wikipedia](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#HTTP/1.1_request_messages)

#### HTTP/1.1 request messages

##### Request syntax

- A client sends *request messages* to the server, which consist of 

  - a **request line**, consisting of <u>the case-sensitive</u> 

    - request method, 
    - a [space](https://en.wikipedia.org/wiki/Space_(punctuation)), 
    - the requested URL,
    - another space, 
    - the protocol version(protocol/version),
    - a [carriage return](https://en.wikipedia.org/wiki/Carriage_return), and a [line feed](https://en.wikipedia.org/wiki/Line_feed), (CRLFå›è½¦æ¢è¡Œ)

  - e.g.:

    - ```
      GET /images/logo.png HTTP/1.1
      
      ```

- zero or more [request header fields](https://en.wikipedia.org/wiki/HTTP_request_header_field) (at least 1 or more headers in case of HTTP/1.1), 

  - each consisting of the case-insensitive field name, a colon, optional leading [whitespace](https://en.wikipedia.org/wiki/Whitespace_(computer_science)), the field value, an optional trailing whitespace and ending with a carriage return and a line feed,

  -  e.g.:

     - ```
       Host: www.example.com
       Accept-Language: en
       ```

- an empty line,

  - consisting of a carriage return and a line feed;

- an optional [message body](https://en.wikipedia.org/wiki/HTTP_message_body).

##### optional@required header fields

- In the HTTP/1.1 protocol, all header fields except `Host: hostname` are optional.

- A request line containing only the path name is accepted by servers to maintain compatibility with HTTP clients before the HTTP/1.0 specification in [RFC](https://en.wikipedia.org/wiki/RFC_(identifier)) [1945](https://datatracker.ietf.org/doc/html/rfc1945).[[47\]](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#cite_note-apacheweek_com-http11-51)


##### ç¤ºæ„å›¾

- ![A basic HTTP request](https://img-blog.csdnimg.cn/img_convert/d6d3934baf247b279aa83ecf0f818345.png)

- ![image-20220529122431957](https://s2.loli.net/2022/05/29/O54Dhbgi2RLEUwx.png)

  

### å“åº”æŠ¥æ–‡ç»“æ„ğŸˆ

#### HTTP/1.1 response messages

A response message is sent by a server to a client as a reply to its former request message.[[note 4\]](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#cite_note-http-23-message-49)

##### Response syntax

A server sends *response messages* to the client, which consist of:  

- a **status line**, consisting of 
  - the protocol version, 
  - a [space](https://en.wikipedia.org/wiki/Space_(punctuation)), 
  - the [response status code](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes), 
  - another space, 
  - a possibly empty **reason phrase**, 
  - a [carriage return](https://en.wikipedia.org/wiki/Carriage_return) and a [line feed](https://en.wikipedia.org/wiki/Line_feed), e.g.:

```
HTTP/1.1 200 OK
```

- zero or more [response header fields](https://en.wikipedia.org/wiki/HTTP_response_header_field)
  -  each consisting of
     -  the case-insensitive field name,
     -  a colon,
     -  optional leading [whitespace](https://en.wikipedia.org/wiki/Whitespace_(computer_science)), 
     -  the field value,
     -  an optional trailing whitespace 
     -  ending with a carriage return and a line feed, e.g.:

```
Content-Type: text/html
```

- an empty line, consisting of a carriage return and a line feed;
- an optional [message body](https://en.wikipedia.org/wiki/HTTP_message_body).

##### å“åº”æŠ¥æ–‡ç¤ºæ„å›¾

- ![HTTP Response image](https://img-blog.csdnimg.cn/img_convert/a03f0313cfe666114197ac3f836bb173.png)

- ![image-20220529122621460](https://s2.loli.net/2022/05/29/xO1mylAw6cu3MzU.png)


- åœ¨èµ·å§‹è¡Œå¼€å¤´çš„ HTTP/1.1 è¡¨ç¤ºæœåŠ¡å™¨å¯¹åº”çš„ **HTTP ç‰ˆæœ¬**ã€‚

- ç´§æŒ¨ç€çš„ **200 OK** è¡¨ç¤ºè¯·æ±‚çš„å¤„ç†ç»“æœçš„**çŠ¶æ€ç ï¼ˆstatus codeï¼‰**å’Œ**åŸå› çŸ­è¯­ï¼ˆreason-phraseï¼‰**ã€‚
- å“åº”é¦–éƒ¨
  - æ˜¾ç¤ºäº†**åˆ›å»ºå“åº”çš„æ—¥æœŸæ—¶é—´**ï¼Œæ˜¯**é¦–éƒ¨å­—æ®µï¼ˆheader fieldï¼‰å†…çš„ä¸€ä¸ªå±æ€§**ã€‚
- å“åº”ä¸»ä½“
  - ä»¥ä¸€ç©ºè¡Œåˆ†éš”ï¼Œä¹‹åçš„å†…å®¹ç§°ä¸º**èµ„æºå®ä½“çš„ä¸»ä½“ï¼ˆentity bodyï¼‰**ã€‚

- **å“åº”æŠ¥æ–‡**åŸºæœ¬ä¸Šç”±
  - åè®®ç‰ˆæœ¬
  - çŠ¶æ€ç ï¼ˆè¡¨ç¤ºè¯·æ±‚æˆåŠŸæˆ–å¤±è´¥çš„æ•°å­—ä»£ç ï¼‰ã€
  - ç”¨ä»¥è§£é‡ŠçŠ¶æ€ç çš„åŸå› çŸ­è¯­ã€
  - å¯é€‰çš„å“åº”é¦–éƒ¨å­—æ®µä»¥åŠ
  - å®ä½“ä¸»æ„æˆ

## å‘ŠçŸ¥æœåŠ¡å™¨æ„å›¾çš„ HTTP æ–¹æ³•ğŸˆ



- | æ–¹æ³•    | è¯´æ˜                   | æ”¯æŒçš„HTTPåè®®ç‰ˆæœ¬ |
  | ------- | ---------------------- | ------------------ |
  | GET     | è·å–èµ„æº               | 1.0ã€1.1           |
  | POST    | ä¼ è¾“å®ä½“ä¸»ä½“           | 1.0ã€1.1           |
  | PUT     | ä¼ è¾“æ–‡ä»¶               | 1.0ã€1.1           |
  | HEAD    | è·å¾—æŠ¥æ–‡é¦–éƒ¨           | 1.0ã€1.1           |
  | DELETE  | åˆ é™¤æ–‡ä»¶               | 1.0ã€1.1           |
  | OPTIONS | è¯¢é—®æ”¯æŒçš„æ–¹æ³•         | 1.1                |
  | TRACE   | è¿½è¸ªè·¯å¾„               | 1.1                |
  | CONNECT | è¦æ±‚ç”¨éš§é“åè®®è¿æ¥ä»£ç† | 1.1                |



## httpå“åº”çŠ¶æ€ç å‚è€ƒ

- |      | ç±»åˆ«                            | åŸå› çŸ­è¯­                   |
  | ---- | ------------------------------- | -------------------------- |
  | 1XX  | Informational ( ä¿¡æ¯æ€§çŠ¶æ€ç )   | æ¥æ”¶çš„è¯·æ±‚æ­£åœ¨å¤„ç†         |
  | 2XX  | Success (æˆåŠŸçŠ¶æ€ç )            | è¯·æ±‚æ­£å¸¸å¤„ç†å®Œæ¯•           |
  | 3XX  | Redirection ( é‡å®šå‘çŠ¶æ€ç )     | éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œä»¥å®Œæˆè¯·æ±‚ |
  | 4XX  | Client Error(å®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç )  | æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚         |
  | 5XX  | Server Error (æœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ) | æœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™         |





