[toc]



## 补码的一位乘法(Booth Algorithm)

- 有符号数乘法
- 采用**相加**和**相减**操作来计算补码的乘积

### 规则

- **符号位参与运算**,运算的数均以补码表示

  - 设参与的两个数为$x,y$
    - $C(x)=x_0.x_1x_2\cdots{x_m}$
    - $C(y)=y_0.y_1y_2\cdots{y_n}$
  - $令函数C(x)表示x的补码;DC(x)表示双符号位化的x的补码$
    - $先算好DC(x)和DC(-x)以及C(y)备用$
    - 将BoothMove表格列出来备用

- **被乘数和部分积**一般取**双符号位**

  - 部分积初始值为0

- 乘数用**单符号位**

  - 乘数末尾增设附加位$y_{n+1}$,初始为0

- 根据$BoothMove(y_n,y_{n+1})来确定移位操作$

  - $\spadesuit这里n指的是乘数y的数值位部分的位数是n$

  - | $y_n$ | $y_{n+1}$ | BoothMove:moveOperate               |
    | ----- | --------- | ----------------------------------- |
    | 0     | 0         | 部分积右移一位                      |
    | 0     | 1         | 部分积加 $x_{补}$ <br />右移一位    |
    | 1     | 0         | 部分积加 $[-x]_{补}$ <br />右移一位 |
    | 1     | 1         | 部分积右移一位                      |

  - 其中,移位按照补码的移位规则进行**补位**

- 上述算法进行n+1步

  - 即:
    - 共进行n+1次累加
    - n次右移(第(n+1)不再移位)

- 运算结果有2n+1=(n+n+1)位

## 补码除法运算

- 符号位和数值位一起参与运算
  - 商符号自然形成
- 设参与的两个数为$x,y$
  - $C(x)=x_0.x_1x_2\cdots{x_m}$
  - $C(y)=y_0.y_1y_2\cdots{y_n}$
  - $求\frac{C(x)}{C(y)}$
  - 根据$x_0,y_0$决定做**加法还是减法**
- 设商和余数分别为:
  - 记$Q=\frac{x}{y};R=x\%y$
  - $C(Q)=q_0.q_1\cdots$
  - $C(R)=r_0.r_1\cdots$
- 加减交替:
  - 如果$y_0=x_0$则用$C(x)-C(y)$
    - $y_0\neq x_0$则用$C(x)+C(y)$
  - 如果$r_0=y_0$,商上1,余数左移1位,减去除数$C(y)$
    - $r_0\neq y_0$,商上0,余数左移1位,加上除数$C(y)$

- 重复操作n次
- 无精度要求时,采用末位恒1法
- n位定点数的除法运算,实际上是用于一个2n位的数除以n位的数



