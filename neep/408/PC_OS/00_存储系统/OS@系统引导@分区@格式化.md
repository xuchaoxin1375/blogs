[toc]

## 引导块

- 计算机启动时需要运行一个**初始化程序（自举程序）**
  - 它初始化CPU、寄存器、设备控制器和内存等，接着启动操作系统。
  - 为此，自举程序**找到磁盘上的操作系统内核**，将它**加载到内存**，并**转到起始地址**，从而**开始操作系统的运行**。

### 自举程序

- 自举程序**通常存放在ROM中**，为了避免改变自举代码而需要**改变ROM硬件**的问题，**通常只在ROM中保留很小的自举<u>装入程序</u>**，而**将完整功能的引导程序**保存在磁盘的启动块上，**启动块位于磁盘的固定位置**。

### 系统磁盘

- 具有**启动分区**的磁盘称为**启动磁盘**或**系统磁盘**。
- 引导ROM中的代码指示磁盘控制器将引导块读入内存，然后开始执行，它可以从非固定的磁盘位置加载整个操作系统，并且开始运行操作系统。

### 引导过程

- 下面以Windows为例来分析引导过程。
- Windows允许将磁盘分为多个分区，有一个分区为引导分区，它包含操作系统和设备驱动程序。Windows系统将引导代码存储在磁盘的第0号扇区，它称为主引导记录(MBR)。
- 首先运行ROM中的代码，这个代码指示系统从MBR中读取引导代码
- 除了包含引导代码，MBR还包含：
  - 一个磁盘分区表
  - 一个标志
    - （以指示从哪个分区引导系统）
- 当系统找到引导分区时，读取分区的第一个扇区，称为引导扇区，并继续余下的引导过程,包括加载各种系统服务。

## 引导扇区

- 操作系统的引导程序位于磁盘活动分区的引导扇区，因此必然产生在分区之后。
- 分区是将磁盘分为由一个或多个柱面组成的分区（即C盘、D盘等形式），
  - 每个分区的起始扇区和大小都记录在磁盘主引导记录的分区表中。

### 格式化

- 高级格式化（创建文件系统），操作系统将初始的文件系统数据结构存储到磁盘上