- - @[toc]
    ## 

    海明(汉明)(Haiming code)校验码

    * 海明码是广泛采用的一种有效的校验码，它实际上是一种 `多重奇偶`校验码。
    * 其实现原理是在有效信息位中 `加入几个校验位形成海明码`，并把海明码的 `每个二进制位分配到几个奇偶校验组中`。
    * 当某一位出错后，就会 `引起有关的几个校验位的值发生变化`，这不但可以发现错位还能指出错位的位置，为自动纠错提供依据。

    * 根据纠错理论得
      $$L一1=D+C\\(L=D+C+1)\\C\leq D$$

    * 即编码 `最小码距L`越大，其检测 `错误的位数D`越大，`纠正错误的位数C`也越大，且 `纠错能力恒小于等于检错能力`。
    * 海明码就是根据这一理论提出的具有纠错能力的一种编码。
      下面用一个例子来介绍求海明码的步骤。

    ### 根据公式确定符合要求的海明码的位数

    

    设n为有效信息的位数，k为校验位的位数，则信息位n和校验位k应满足:
    n+k ≤ 2k -1（若要检测两位错，则需再增加1位校验位，即k＋1位)

    海明码位数为$n+k=7≤2^3-1$成立，则$n、k$有效。

    设信息位为$D_4;D_3,D_2,D_1$;(1010)，共4位，

    校验位为$P_3P_2P_1$，共3位，

    对应的海明码为$H_7H_6H_5H_4H_3H_2H_1$。

    > 这里的$H_i$表示海明号(Hamming)

    ### 确定校验位的分布

    - 规定校验位$P_i$在`海明号`位$2^{i-1}$的位置上
    - 其余位是信息位
    - 可以这样类比
      - 海明号作为座位(椅子)的编号
      - 海明码中的校验位和信息位分别类比位保安和游客(人)
      - 我们需要计算出几位保安应该就位到那些海明号($H_i$上)
      - 譬如,$i$号校验码($P_i$)需要防止在$2^{i-1}$的位置上(两套编号系统的一个映射函数(对应关系)$H(P_i)$=$2^{i-1}$)
    - 安排完校验位后,其余位($H_i$)用信息位$D_i$插入(按原信息位的序列顺序)

    ![1646615712583.png](https://img-blog.csdnimg.cn/img_convert/6b3b27c16d2b835510ea333ee896b950.png)

    ### 分组以形成校验关系

    - 每个数据位$D_i$用`多个校验位`($P_i$)进行校验，

      - 但要满足条件:

        - 被校验数据位的`海明位号`等于`校验该数据位的各校验位`的`海明位号之和`。

          - 这里强调的是`海明号之和`;也就是海明码在海明号序列下的下标之和之间的约束关系
    	      >草稿
    	      >- $H_D(i_D)=\sum{H_P(i_P)}$
    	      >- $H_D(i_D)=\sum{H_P(i_{a_P})+Hp(i_{b_P})+\cdots+H_p(i_{n_P})}$
    	      >- $H_D(i_D)=\displaystyle\sum_{i_{m_P}}^{k}{H_P(i_{1_P})+Hp(i_{2_P})+\cdots+H_p(i_{k_P})}$;
          - 形式化公式是我凭着理解尽量表达出来的(可能不是那么贴切)
            
               > last version formula:
               
          - $H_D(i_D)=\displaystyle\sum_{i_{m_P}}^{k}{H_P(i_{1_P})+Hp(i_{2_P})+\cdots}$;
        
          - 如果我们引入单行向量(数组),即将`m`视为个一维向量(包含若干个元素,会根据等式的左边,m向量中的一个元素$m[i]$,对应校验位$m[i]=P_{mi}$)将会取得不同的数字(元素个数也能不同));从而,我们的表达式可以更加简练地写为
            $$
            H_D(i_D)=\displaystyle\sum{H_P(m[i])};
            $$
            
        
            - k是所有校验位的总数目;
            - $i_m$之间不一定是连续的校验位
            - (例如,$i_{1p}可以表示任意一位校验位的下标$,与之对比的,$i_{P1}$表示的是才是第1位校验位$P_1$的下标))
              - 因此说,校验位下标$i_{1p},i_{2p}$对应的校验位,往往不是相邻的校验位.
            - $H_D()函数和H_P()函数分别接受某个信息位D_i,校验位P_i的下标数字,求出该下表对应的海明号($$H_i$)
        
        - 另外，校验位不需要再被校验。
        
        - 分组形成的校验关系如下。(注意海明位上的各个位的对应关系)
        
          - $$
            信息位按原来的顺序揷入, 则海明码各位的分布如下:
            \\
            \begin{array}{llllllc}
            H_{7} & H_{6} & H_{5} & H_{4} & H_{3} & H_{2} & H_{1} \\
            D_{4} & D_{3} & D_{2} & P_{3} & D_{1} & P_{2} & P_{1}
            \end{array}
            $$
        
          - 

    ![1646615721881.png](https://img-blog.csdnimg.cn/img_convert/6189575448c26bcb6964a4920464d0b7.png)

    ### 求解校验位取值(根据分组后各组内的信息位来求)

    - 校验位$P_i$的值为第`i`组信息位（由该校验位校验的数据位$D_i$）所有位求异或。
    - 本步骤中获得完整海明码

    ![1646615731493.png](https://img-blog.csdnimg.cn/img_convert/45c789c755fbc20932e9fa635093c2f8.png)

$$
根据上述的分组有\\
\begin{array}{l}
P_{1}=D_{1} \oplus D_{2} \oplus D_{4}=0 \oplus 1 \oplus 1=0 \\
P_{2}=D_{1} \oplus D_{3} \oplus D_{4}=0 \oplus 0 \oplus 1=1 \\
P_{3}=D_{2} \oplus D_{3} \oplus D_{4}=1 \oplus 0 \oplus 1=0
\end{array}
$$

- 所以, 信息序列1010 对应的海明码为 $101 \underline{0} 0 \underline{10}$
- (下画线为校验位, 其他为信息位)

### 海明码的校验

- 利用各组内的奇偶校验(也是求亦或的过程)来检查
- 将构成K个方程
  - Hamming Code=101`0`0`10`

$$
每个校验组分别利用校验位和参与形成该校验位的信息位进行奇偶校验检查, 构成  k  个校验 方程:
\\
\begin{array}{l}
S_{1}=P_{1} \oplus D_{1} \oplus D_{2} \oplus D_{4} \\
S_{2}=P_{2} \oplus D_{1} \oplus D_{3} \oplus D_{4} \\
S_{3}=P_{3} \oplus D_{2} \oplus D_{3} \oplus D_{4}
\end{array}
\\
$$

- 若$S_{3} S_{2} S_{1}$ 的值为 “ 000 ”, 则说明无错; 
- 否则说明出错, 且这个数就是错误位的位号, 
  - 如 $S_{3} S_{2} S_{1}=001$ , 说明第 1 位出错, 即  $H_{1}$  出错, 直接将该位取反就达到了纠错的目的。
