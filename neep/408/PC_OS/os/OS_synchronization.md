[toc]

# OS_peterson' Algorithm

- 单变量法
  - 该法保证互斥,又不会死锁
  - 但是对于资源利用率过低
- 双标志法
  - 试图改进资源利用率,但是引入了临界区访问问题
  - 先检查后置位,不会死锁,但是无法实现可靠的互斥功能
    - 尤其是当两个进程同时访问标志位的时候,由于不连续性,使得两个进程都一位自己可以进入临界区,导致互斥性在这种情况下不成立
  - 先置位后检查,保证互斥,但是可能导致死锁
    - 同样是在两个进程同时反转子集的意愿标志位,导致双方都检检测到对方的意愿,进而互相谦让,都无法进入临界区
- 鉴于上述情况,peterson前两类做法综合起来
  - 由于双标志法的`先置位,后检查`的做法引起肯能引起死锁,所以需要避免死锁或者有人来打破死锁
  - 解决死锁的关键因素就是引入变量turn
  - 即,当两个进程都想要进入临界区(通过设置各自的标志位来表达意愿),
  - 同时为了避免死锁,相关的进程还需紧接着设置变量turn,设置turn的方式不唯一,可以采用相互谦让的方式(进程i将turn设置位j)
  - 现在,两者检测对方的意愿时,还要请示裁决者变量turn,这样,当两个进程都想进入临界区的时候,就有turn的取值来做抉择,由于裁决者turn的值要么时i,要么是j,所以,最终实现,有进程想要进入临界区时,会有且只会有一个进程能够进入